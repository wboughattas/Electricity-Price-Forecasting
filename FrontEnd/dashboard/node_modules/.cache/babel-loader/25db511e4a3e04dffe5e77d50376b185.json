{"ast":null,"code":"/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, fromEnum, EnumUtil, String_$type, markType } from \"./type\";\nimport { IDataSeriesAdapterRule_$type } from \"./IDataSeriesAdapterRule\";\nimport { List$1 } from \"./List$1\";\nimport { DataSeriesIntent_$type } from \"./DataSeriesIntent\";\nimport { DataSeries } from \"./DataSeries\";\nimport { DataSeriesMemberPathHint } from \"./DataSeriesMemberPathHint\";\nimport { truncate } from \"./number\";\nimport { stringJoin } from \"./string\";\n/**\r\n * @hidden\r\n */\n\nvar SimpleFinancialPriceSeriesRule =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(SimpleFinancialPriceSeriesRule, _super);\n\n  function SimpleFinancialPriceSeriesRule() {\n    var _this = _super.call(this) || this;\n\n    _this._priority = 0;\n    _this._distinctCheckThreshold = 0;\n    _this.priority = 10;\n    _this.distinctCheckThreshold = 50000;\n    return _this;\n  }\n\n  Object.defineProperty(SimpleFinancialPriceSeriesRule.prototype, \"priority\", {\n    get: function () {\n      return this._priority;\n    },\n    set: function (a) {\n      this._priority = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SimpleFinancialPriceSeriesRule.prototype, \"distinctCheckThreshold\", {\n    get: function () {\n      return this._distinctCheckThreshold;\n    },\n    set: function (a) {\n      this._distinctCheckThreshold = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SimpleFinancialPriceSeriesRule.prototype.e = function (a, b) {\n    var e_1, _a;\n\n    try {\n      for (var _b = tslib_1.__values(fromEnum(b)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var c = _c.value;\n\n        if (a.contains(c)) {\n          a.remove(c);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  SimpleFinancialPriceSeriesRule.d = function (a, b) {\n    var c = a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 17));\n\n    if (c.length > 0) {\n      return c[0];\n    }\n\n    return function (d) {\n      return d != null ? d : a.analyzer.getFirstDateTimeProperty();\n    }(a.analyzer.getFirstDistinctDateTimeProperty(b));\n  };\n\n  SimpleFinancialPriceSeriesRule.b = function (a, b) {\n    var c = a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 17));\n\n    if (c.length > 0) {\n      return c[0];\n    }\n\n    c = a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 16));\n\n    if (c.length > 0) {\n      return c[0];\n    }\n\n    return function (d) {\n      return d != null ? d : function (e) {\n        return e != null ? e : function (f) {\n          return f != null ? f : a.analyzer.getFirstStringProperty();\n        }(a.analyzer.getFirstDistinctMonotonicNumericProperty(b));\n      }(a.analyzer.getFirstDistinctStringProperty(b));\n    }(a.analyzer.getFirstDistinctDateTimeProperty(b));\n  };\n\n  SimpleFinancialPriceSeriesRule.prototype.evaluate = function (a) {\n    var e_2, _a;\n\n    var b = SimpleFinancialPriceSeriesRule.d(a, this.distinctCheckThreshold);\n    var c = SimpleFinancialPriceSeriesRule.b(a, this.distinctCheckThreshold);\n    var d = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 11)));\n    var e = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 12)));\n    var f = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 13)));\n    var g = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 14)));\n    var h = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, 15)));\n    var i = Math.min(d.count, Math.min(e.count, Math.min(f.count, g.count)));\n\n    if (i == 0) {\n      var j = new List$1(String_$type, 1, a.analyzer.getAllNumericProperties());\n\n      try {\n        for (var _b = tslib_1.__values(fromEnum(j)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var k = _c.value;\n\n          if (Base.equalsStatic(k.toLowerCase(), \"open\")) {\n            d.add(k);\n            continue;\n          }\n\n          if (Base.equalsStatic(k.toLowerCase(), \"high\")) {\n            e.add(k);\n            continue;\n          }\n\n          if (Base.equalsStatic(k.toLowerCase(), \"low\")) {\n            f.add(k);\n            continue;\n          }\n\n          if (Base.equalsStatic(k.toLowerCase(), \"close\")) {\n            g.add(k);\n            continue;\n          }\n\n          if (Base.equalsStatic(k.toLowerCase(), \"volume\")) {\n            h.add(k);\n            continue;\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n\n      this.e(j, d);\n      this.e(j, e);\n      this.e(j, f);\n      this.e(j, g);\n      this.e(j, h);\n      var l = d.count + e.count + f.count + g.count + j.count;\n\n      if (l == 0) {\n        return;\n      }\n\n      i = l <= 4 ? 1 : truncate(Math.floor(l / 5));\n      var m = [d, e, f, g, h];\n      var n = 0;\n\n      while (j.count > 0) {\n        m[n++ % m.length].add(j._inner[0]);\n        j.removeAt(0);\n      }\n    }\n\n    var o = this.c(a.getCurrentDataSource());\n\n    var _loop_1 = function (p) {\n      a.pushParentTitle(i == 1 ? o : o + (p + 1));\n      var q = d.count > p ? d._inner[p] : null;\n      var r = e.count > p ? e._inner[p] : null;\n      var s = f.count > p ? f._inner[p] : null;\n      var t = g.count > p ? g._inner[p] : null;\n\n      var u = function () {\n        var $ret = new DataSeries();\n        $ret.name = stringJoin.apply(void 0, tslib_1.__spread([\"_\"], [q, r, s, t]));\n        $ret.title = a.analyzer.getTitleString(null, [q, r, s, t]);\n        $ret.suggestedSeries = 20;\n        $ret.suggestedPrimaryAxis = 0;\n        $ret.suggestedSecondaryAxis = 1;\n        return $ret;\n      }();\n\n      u.addMemberPathHint(function () {\n        var $ret = new DataSeriesMemberPathHint();\n        $ret.intent = 11;\n        $ret.path = q;\n        return $ret;\n      }());\n      u.addMemberPathHint(function () {\n        var $ret = new DataSeriesMemberPathHint();\n        $ret.intent = 12;\n        $ret.path = r;\n        return $ret;\n      }());\n      u.addMemberPathHint(function () {\n        var $ret = new DataSeriesMemberPathHint();\n        $ret.intent = 13;\n        $ret.path = s;\n        return $ret;\n      }());\n      u.addMemberPathHint(function () {\n        var $ret = new DataSeriesMemberPathHint();\n        $ret.intent = 14;\n        $ret.path = t;\n        return $ret;\n      }());\n\n      if (h.count > p) {\n        u.addMemberPathHint(function () {\n          var $ret = new DataSeriesMemberPathHint();\n          $ret.intent = 15;\n          $ret.path = h._inner[p];\n          return $ret;\n        }());\n      }\n\n      if (b != null) {\n        u.addMemberPathHint(function () {\n          var $ret = new DataSeriesMemberPathHint();\n          $ret.intent = 17;\n          $ret.path = b;\n          return $ret;\n        }());\n      }\n\n      u.addMemberPathHint(function () {\n        var $ret = new DataSeriesMemberPathHint();\n        $ret.intent = 16;\n        $ret.path = c;\n        return $ret;\n      }());\n      a.addDataSeries(u, this_1);\n      a.popParentTitle();\n    };\n\n    var this_1 = this;\n\n    for (var p = 0; p < i; p++) {\n      _loop_1(p);\n    }\n  };\n\n  SimpleFinancialPriceSeriesRule.prototype.c = function (a) {\n    var b = a == null ? null : a.dataSource;\n\n    if (b == null) {\n      return null;\n    }\n\n    var c = typeof b.title === 'function';\n    return c ? b.title() : b.title ? b.title : null;\n  };\n\n  SimpleFinancialPriceSeriesRule.$t = markType(SimpleFinancialPriceSeriesRule, 'SimpleFinancialPriceSeriesRule', Base.$, [IDataSeriesAdapterRule_$type]);\n  return SimpleFinancialPriceSeriesRule;\n}(Base);\n\nexport { SimpleFinancialPriceSeriesRule };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/SimpleFinancialPriceSeriesRule.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\r\nimport * as tslib_1 from \"tslib\";\r\nimport { Base, fromEnum, EnumUtil, String_$type, markType } from \"./type\";\r\nimport { IDataSeriesAdapterRule_$type } from \"./IDataSeriesAdapterRule\";\r\nimport { List$1 } from \"./List$1\";\r\nimport { DataSeriesIntent_$type } from \"./DataSeriesIntent\";\r\nimport { DataSeries } from \"./DataSeries\";\r\nimport { DataSeriesMemberPathHint } from \"./DataSeriesMemberPathHint\";\r\nimport { truncate } from \"./number\";\r\nimport { stringJoin } from \"./string\";\r\n/**\r\n * @hidden\r\n */\r\nvar SimpleFinancialPriceSeriesRule = /** @class */ /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(SimpleFinancialPriceSeriesRule, _super);\r\n    function SimpleFinancialPriceSeriesRule() {\r\n        var _this = _super.call(this) || this;\r\n        _this._priority = 0;\r\n        _this._distinctCheckThreshold = 0;\r\n        _this.priority = 10;\r\n        _this.distinctCheckThreshold = 50000;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SimpleFinancialPriceSeriesRule.prototype, \"priority\", {\r\n        get: function () {\r\n            return this._priority;\r\n        },\r\n        set: function (a) {\r\n            this._priority = a;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SimpleFinancialPriceSeriesRule.prototype, \"distinctCheckThreshold\", {\r\n        get: function () {\r\n            return this._distinctCheckThreshold;\r\n        },\r\n        set: function (a) {\r\n            this._distinctCheckThreshold = a;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SimpleFinancialPriceSeriesRule.prototype.e = function (a, b) {\r\n        var e_1, _a;\r\n        try {\r\n            for (var _b = tslib_1.__values(fromEnum(b)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var c = _c.value;\r\n                if (a.contains(c)) {\r\n                    a.remove(c);\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return))\r\n                    _a.call(_b);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n    };\r\n    SimpleFinancialPriceSeriesRule.d = function (a, b) {\r\n        var c = a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (17)));\r\n        if (c.length > 0) {\r\n            return c[0];\r\n        }\r\n        return ((function (d) { return d != null ? d : a.analyzer.getFirstDateTimeProperty(); })(a.analyzer.getFirstDistinctDateTimeProperty(b)));\r\n    };\r\n    SimpleFinancialPriceSeriesRule.b = function (a, b) {\r\n        var c = a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (17)));\r\n        if (c.length > 0) {\r\n            return c[0];\r\n        }\r\n        c = a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (16)));\r\n        if (c.length > 0) {\r\n            return c[0];\r\n        }\r\n        return ((function (d) { return d != null ? d : ((function (e) { return e != null ? e : ((function (f) { return f != null ? f : a.analyzer.getFirstStringProperty(); })(a.analyzer.getFirstDistinctMonotonicNumericProperty(b))); })(a.analyzer.getFirstDistinctStringProperty(b))); })(a.analyzer.getFirstDistinctDateTimeProperty(b)));\r\n    };\r\n    SimpleFinancialPriceSeriesRule.prototype.evaluate = function (a) {\r\n        var e_2, _a;\r\n        var b = SimpleFinancialPriceSeriesRule.d(a, this.distinctCheckThreshold);\r\n        var c = SimpleFinancialPriceSeriesRule.b(a, this.distinctCheckThreshold);\r\n        var d = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (11))));\r\n        var e = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (12))));\r\n        var f = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (13))));\r\n        var g = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (14))));\r\n        var h = new List$1(String_$type, 1, a.analyzer.getAllPropertiesWithIntent(EnumUtil.getName(DataSeriesIntent_$type, (15))));\r\n        var i = Math.min(d.count, Math.min(e.count, Math.min(f.count, g.count)));\r\n        if (i == 0) {\r\n            var j = new List$1(String_$type, 1, a.analyzer.getAllNumericProperties());\r\n            try {\r\n                for (var _b = tslib_1.__values(fromEnum(j)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var k = _c.value;\r\n                    if (Base.equalsStatic(k.toLowerCase(), \"open\")) {\r\n                        d.add(k);\r\n                        continue;\r\n                    }\r\n                    if (Base.equalsStatic(k.toLowerCase(), \"high\")) {\r\n                        e.add(k);\r\n                        continue;\r\n                    }\r\n                    if (Base.equalsStatic(k.toLowerCase(), \"low\")) {\r\n                        f.add(k);\r\n                        continue;\r\n                    }\r\n                    if (Base.equalsStatic(k.toLowerCase(), \"close\")) {\r\n                        g.add(k);\r\n                        continue;\r\n                    }\r\n                    if (Base.equalsStatic(k.toLowerCase(), \"volume\")) {\r\n                        h.add(k);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this.e(j, d);\r\n            this.e(j, e);\r\n            this.e(j, f);\r\n            this.e(j, g);\r\n            this.e(j, h);\r\n            var l = d.count + e.count + f.count + g.count + j.count;\r\n            if (l == 0) {\r\n                return;\r\n            }\r\n            i = l <= 4 ? 1 : truncate(Math.floor(l / 5));\r\n            var m = [d, e, f, g, h];\r\n            var n = 0;\r\n            while (j.count > 0) {\r\n                m[n++ % m.length].add(j._inner[0]);\r\n                j.removeAt(0);\r\n            }\r\n        }\r\n        var o = this.c(a.getCurrentDataSource());\r\n        var _loop_1 = function (p) {\r\n            a.pushParentTitle(i == 1 ? o : o + (p + 1));\r\n            var q = d.count > p ? d._inner[p] : null;\r\n            var r = e.count > p ? e._inner[p] : null;\r\n            var s = f.count > p ? f._inner[p] : null;\r\n            var t = g.count > p ? g._inner[p] : null;\r\n            var u = ((function () {\r\n                var $ret = new DataSeries();\r\n                $ret.name = stringJoin.apply(void 0, tslib_1.__spread([\"_\"], [q, r, s, t]));\r\n                $ret.title = a.analyzer.getTitleString(null, [q, r, s, t]);\r\n                $ret.suggestedSeries = 20;\r\n                $ret.suggestedPrimaryAxis = 0;\r\n                $ret.suggestedSecondaryAxis = 1;\r\n                return $ret;\r\n            })());\r\n            u.addMemberPathHint(((function () {\r\n                var $ret = new DataSeriesMemberPathHint();\r\n                $ret.intent = 11;\r\n                $ret.path = q;\r\n                return $ret;\r\n            })()));\r\n            u.addMemberPathHint(((function () {\r\n                var $ret = new DataSeriesMemberPathHint();\r\n                $ret.intent = 12;\r\n                $ret.path = r;\r\n                return $ret;\r\n            })()));\r\n            u.addMemberPathHint(((function () {\r\n                var $ret = new DataSeriesMemberPathHint();\r\n                $ret.intent = 13;\r\n                $ret.path = s;\r\n                return $ret;\r\n            })()));\r\n            u.addMemberPathHint(((function () {\r\n                var $ret = new DataSeriesMemberPathHint();\r\n                $ret.intent = 14;\r\n                $ret.path = t;\r\n                return $ret;\r\n            })()));\r\n            if (h.count > p) {\r\n                u.addMemberPathHint(((function () {\r\n                    var $ret = new DataSeriesMemberPathHint();\r\n                    $ret.intent = 15;\r\n                    $ret.path = h._inner[p];\r\n                    return $ret;\r\n                })()));\r\n            }\r\n            if (b != null) {\r\n                u.addMemberPathHint(((function () {\r\n                    var $ret = new DataSeriesMemberPathHint();\r\n                    $ret.intent = 17;\r\n                    $ret.path = b;\r\n                    return $ret;\r\n                })()));\r\n            }\r\n            u.addMemberPathHint(((function () {\r\n                var $ret = new DataSeriesMemberPathHint();\r\n                $ret.intent = 16;\r\n                $ret.path = c;\r\n                return $ret;\r\n            })()));\r\n            a.addDataSeries(u, this_1);\r\n            a.popParentTitle();\r\n        };\r\n        var this_1 = this;\r\n        for (var p = 0; p < i; p++) {\r\n            _loop_1(p);\r\n        }\r\n    };\r\n    SimpleFinancialPriceSeriesRule.prototype.c = function (a) {\r\n        var b = a == null ? null : a.dataSource;\r\n        if (b == null) {\r\n            return null;\r\n        }\r\n        var c = (typeof b.title === 'function');\r\n        return c ? (b.title()) : (b.title) ? (b.title) : null;\r\n    };\r\n    SimpleFinancialPriceSeriesRule.$t = markType(SimpleFinancialPriceSeriesRule, 'SimpleFinancialPriceSeriesRule', Base.$, [IDataSeriesAdapterRule_$type]);\r\n    return SimpleFinancialPriceSeriesRule;\r\n}(Base));\r\nexport { SimpleFinancialPriceSeriesRule };\r\n//# sourceMappingURL=SimpleFinancialPriceSeriesRule.js.map\r\n"]},"metadata":{},"sourceType":"module"}