{"ast":null,"code":"/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, Number_$type, markType } from \"./type\";\nimport { List$1 } from \"./List$1\";\nimport { FlattenerSettings } from \"./FlattenerSettings\";\nimport { isNaN_ } from \"./number\";\n/**\r\n * @hidden\r\n */\n\nvar FastFlattener =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(FastFlattener, _super);\n\n  function FastFlattener() {\n    return _super.call(this) || this;\n  }\n\n  FastFlattener.e = function (a, b, c, d, e, f) {\n    if (d > e) {\n      return a;\n    }\n\n    var g = b[d];\n    var h = c[d];\n\n    while ((isNaN_(g) || isNaN_(h)) && d < e) {\n      ++d;\n      g = b[d];\n      h = c[d];\n    }\n\n    var i = b[e];\n    var j = c[e];\n\n    while ((isNaN_(i) || isNaN_(j)) && d < e) {\n      --e;\n      i = b[e];\n      j = c[e];\n    }\n\n    if (d == e) {\n      a.add(d);\n      return a;\n    }\n\n    a.add(d);\n    FastFlattener.h(a, b, c, d, e, f);\n    a.add(e);\n    return a;\n  };\n\n  FastFlattener.c = function (a, b, c, d, e) {\n    var f;\n    var g;\n\n    if (c) {\n      f = 0;\n      g = 1;\n    } else if (d) {\n      f = 0;\n      g = 2;\n    } else {\n      f = 2;\n      g = 3;\n    }\n\n    return FastFlattener.d(a, b, f, g, e);\n  };\n\n  FastFlattener.b = function (a, b, c, d, e) {\n    var f = new List$1(Number_$type, 0);\n    var g = FastFlattener.a(f, b, c, d, 0, a - 1, e);\n    return g;\n  };\n\n  FastFlattener.d = function (a, b, c, d, e) {\n    var f = new List$1(Number_$type, 0);\n    FastFlattener.g(f, b, c, d, 0, a - 1, e);\n    return f;\n  };\n\n  FastFlattener.a = function (a, b, c, d, e, f, g) {\n    var h = FlattenerSettings.instance.chunkingAmount;\n\n    if (f - e + 1 <= h) {\n      return FastFlattener.f(a, b, c, d, e, f, g);\n    }\n\n    var i = a;\n\n    if (h < 0) {\n      for (var j = e; j <= f; j++) {\n        i.add(j);\n      }\n\n      return i;\n    }\n\n    var k = e;\n    var l = f;\n    var m = l - k + 1;\n\n    while (m > 0) {\n      if (m <= h) {\n        FastFlattener.f(i, b, c, d, k, l, g);\n        k = l + 1;\n      } else {\n        var n = k + h - 1;\n        FastFlattener.f(i, b, c, d, k, n, g);\n        k = n + 1;\n      }\n\n      m = l - k + 1;\n    }\n\n    return i;\n  };\n\n  FastFlattener.f = function (a, b, c, d, e, f, g) {\n    var h;\n    var i;\n\n    if (c) {\n      h = 0;\n      i = 1;\n    } else if (d) {\n      h = 0;\n      i = 2;\n    } else {\n      h = 2;\n      i = 3;\n    }\n\n    return FastFlattener.g(a, b, h, i, e, f, g);\n  };\n\n  FastFlattener.g = function (a, b, c, d, e, f, g) {\n    if (e > f) {\n      return a;\n    }\n\n    var h = b._inner[e];\n    var i, j;\n    i = h[c];\n    j = h[d];\n\n    while ((isNaN_(i) || isNaN_(j)) && e < f) {\n      ++e;\n      h = b._inner[e];\n      i = h[c];\n      j = h[d];\n    }\n\n    var k = b._inner[f];\n    var l, m;\n    l = k[c];\n    m = k[d];\n\n    while ((isNaN_(l) || isNaN_(m)) && e < f) {\n      --f;\n      k = b._inner[f];\n      l = k[c];\n      m = k[d];\n    }\n\n    if (e == f) {\n      a.add(e);\n      return a;\n    }\n\n    a.add(e);\n    FastFlattener.i(a, b, c, d, e, f, g);\n    a.add(f);\n    return a;\n  };\n\n  FastFlattener.h = function (a, b, c, d, e, f) {\n    var g = b[d];\n    var h = c[d];\n\n    while ((isNaN_(g) || isNaN_(h)) && d < e) {\n      ++d;\n      g = b[d];\n      h = c[d];\n    }\n\n    var i = b[e];\n    var j = c[e];\n\n    while ((isNaN_(i) || isNaN_(j)) && d < e) {\n      --e;\n      i = b[e];\n      j = c[e];\n    }\n\n    if (d + 1 >= e) {\n      return;\n    }\n\n    var k = -1;\n    var l = f * f;\n    var m;\n    var n;\n    m = i - g;\n    n = j - h;\n    var o = m * m + n * n;\n\n    if (o == 0) {\n      for (var p = d + 1; p < e; ++p) {\n        var q = b[p];\n        var r = c[p];\n\n        if (isNaN_(q) || isNaN_(r)) {\n          continue;\n        }\n\n        m = i - q;\n        n = j - r;\n        var s = m * m + n * n;\n\n        if (s >= l) {\n          l = s;\n          k = p;\n        }\n      }\n    } else {\n      var t = i - g;\n      var u = j - h;\n\n      for (var v = d + 1; v < e; ++v) {\n        var w = b[v];\n        var x = c[v];\n\n        if (isNaN_(w) || isNaN_(x)) {\n          continue;\n        }\n\n        var y = NaN;\n        var z = b[v] - g;\n        var aa = c[v] - h;\n        var ab = t * z + u * aa;\n\n        if (ab <= 0) {\n          m = g - w;\n          n = h - x;\n          y = m * m + n * n;\n        } else {\n          var ac = t * t + u * u;\n\n          if (ac <= ab) {\n            m = i - w;\n            n = j - x;\n            y = m * m + n * n;\n          } else {\n            var ad = ab / ac;\n            m = g + ad * t - w;\n            n = h + ad * u - x;\n            y = m * m + n * n;\n          }\n        }\n\n        if (y >= l) {\n          l = y;\n          k = v;\n        }\n      }\n    }\n\n    if (k != -1) {\n      FastFlattener.h(a, b, c, d, k, f);\n      a.add(k);\n      FastFlattener.h(a, b, c, k, e, f);\n    }\n\n    return;\n  };\n\n  FastFlattener.i = function (a, b, c, d, e, f, g) {\n    var h = b._inner[e];\n    var i, j;\n    i = h[c];\n    j = h[d];\n\n    while (i != i || j != j && e < f) {\n      ++e;\n      h = b._inner[e];\n      i = h[c];\n      j = h[d];\n    }\n\n    var k = b._inner[f];\n    var l, m;\n    l = k[c];\n    m = k[d];\n\n    while (l != l || m != m && e < f) {\n      --f;\n      k = b._inner[f];\n      l = k[c];\n      m = k[d];\n    }\n\n    if (e + 1 >= f) {\n      return;\n    }\n\n    var n = -1;\n    var o = g * g;\n    var p;\n    var q;\n    p = l - i;\n    q = m - j;\n    var r = p * p + q * q;\n\n    if (r == 0) {\n      for (var s = e + 1; s < f; ++s) {\n        var t = b._inner[s];\n        var u = void 0,\n            v = void 0;\n        u = t[c];\n        v = t[d];\n\n        if (u != u || v != v) {\n          continue;\n        }\n\n        p = l - u;\n        q = m - v;\n        var w = p * p + q * q;\n\n        if (w >= o) {\n          o = w;\n          n = s;\n        }\n      }\n    } else {\n      var x = l - i;\n      var y = m - j;\n\n      for (var z = e + 1; z < f; ++z) {\n        var aa = b._inner[z];\n        var ab = void 0,\n            ac = void 0;\n        ab = aa[c];\n        ac = aa[d];\n\n        if (ab != ab || ac != ac) {\n          continue;\n        }\n\n        var ad = NaN;\n        var ae = ab - i;\n        var af = ac - j;\n        var ag = x * ae + y * af;\n\n        if (ag <= 0) {\n          p = i - ab;\n          q = j - ac;\n          ad = p * p + q * q;\n        } else {\n          var ah = x * x + y * y;\n\n          if (ah <= ag) {\n            p = l - ab;\n            q = m - ac;\n            ad = p * p + q * q;\n          } else {\n            var ai = ag / ah;\n            p = i + ai * x - ab;\n            q = j + ai * y - ac;\n            ad = p * p + q * q;\n          }\n        }\n\n        if (ad >= o) {\n          o = ad;\n          n = z;\n        }\n      }\n    }\n\n    if (n != -1) {\n      FastFlattener.i(a, b, c, d, e, n, g);\n      a.add(n);\n      FastFlattener.i(a, b, c, d, n, f, g);\n    }\n\n    return;\n  };\n\n  FastFlattener.$t = markType(FastFlattener, 'FastFlattener');\n  return FastFlattener;\n}(Base);\n\nexport { FastFlattener };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/FastFlattener.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\r\nimport * as tslib_1 from \"tslib\";\r\nimport { Base, Number_$type, markType } from \"./type\";\r\nimport { List$1 } from \"./List$1\";\r\nimport { FlattenerSettings } from \"./FlattenerSettings\";\r\nimport { isNaN_ } from \"./number\";\r\n/**\r\n * @hidden\r\n */\r\nvar FastFlattener = /** @class */ /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(FastFlattener, _super);\r\n    function FastFlattener() {\r\n        return _super.call(this) || this;\r\n    }\r\n    FastFlattener.e = function (a, b, c, d, e, f) {\r\n        if (d > e) {\r\n            return a;\r\n        }\r\n        var g = b[d];\r\n        var h = c[d];\r\n        while ((isNaN_(g) || isNaN_(h)) && d < e) {\r\n            ++d;\r\n            g = b[d];\r\n            h = c[d];\r\n        }\r\n        var i = b[e];\r\n        var j = c[e];\r\n        while ((isNaN_(i) || isNaN_(j)) && d < e) {\r\n            --e;\r\n            i = b[e];\r\n            j = c[e];\r\n        }\r\n        if (d == e) {\r\n            a.add(d);\r\n            return a;\r\n        }\r\n        a.add(d);\r\n        FastFlattener.h(a, b, c, d, e, f);\r\n        a.add(e);\r\n        return a;\r\n    };\r\n    FastFlattener.c = function (a, b, c, d, e) {\r\n        var f;\r\n        var g;\r\n        if (c) {\r\n            f = 0;\r\n            g = 1;\r\n        }\r\n        else if (d) {\r\n            f = 0;\r\n            g = 2;\r\n        }\r\n        else {\r\n            f = 2;\r\n            g = 3;\r\n        }\r\n        return FastFlattener.d(a, b, f, g, e);\r\n    };\r\n    FastFlattener.b = function (a, b, c, d, e) {\r\n        var f = new List$1(Number_$type, 0);\r\n        var g = FastFlattener.a(f, b, c, d, 0, a - 1, e);\r\n        return g;\r\n    };\r\n    FastFlattener.d = function (a, b, c, d, e) {\r\n        var f = new List$1(Number_$type, 0);\r\n        FastFlattener.g(f, b, c, d, 0, a - 1, e);\r\n        return f;\r\n    };\r\n    FastFlattener.a = function (a, b, c, d, e, f, g) {\r\n        var h = FlattenerSettings.instance.chunkingAmount;\r\n        if ((f - e + 1) <= h) {\r\n            return FastFlattener.f(a, b, c, d, e, f, g);\r\n        }\r\n        var i = a;\r\n        if (h < 0) {\r\n            for (var j = e; j <= f; j++) {\r\n                i.add(j);\r\n            }\r\n            return i;\r\n        }\r\n        var k = e;\r\n        var l = f;\r\n        var m = l - k + 1;\r\n        while (m > 0) {\r\n            if (m <= h) {\r\n                FastFlattener.f(i, b, c, d, k, l, g);\r\n                k = l + 1;\r\n            }\r\n            else {\r\n                var n = k + h - 1;\r\n                FastFlattener.f(i, b, c, d, k, n, g);\r\n                k = n + 1;\r\n            }\r\n            m = l - k + 1;\r\n        }\r\n        return i;\r\n    };\r\n    FastFlattener.f = function (a, b, c, d, e, f, g) {\r\n        var h;\r\n        var i;\r\n        if (c) {\r\n            h = 0;\r\n            i = 1;\r\n        }\r\n        else if (d) {\r\n            h = 0;\r\n            i = 2;\r\n        }\r\n        else {\r\n            h = 2;\r\n            i = 3;\r\n        }\r\n        return FastFlattener.g(a, b, h, i, e, f, g);\r\n    };\r\n    FastFlattener.g = function (a, b, c, d, e, f, g) {\r\n        if (e > f) {\r\n            return a;\r\n        }\r\n        var h = b._inner[e];\r\n        var i, j;\r\n        i = h[c];\r\n        j = h[d];\r\n        while ((isNaN_(i) || isNaN_(j)) && e < f) {\r\n            ++e;\r\n            h = b._inner[e];\r\n            i = h[c];\r\n            j = h[d];\r\n        }\r\n        var k = b._inner[f];\r\n        var l, m;\r\n        l = k[c];\r\n        m = k[d];\r\n        while ((isNaN_(l) || isNaN_(m)) && e < f) {\r\n            --f;\r\n            k = b._inner[f];\r\n            l = k[c];\r\n            m = k[d];\r\n        }\r\n        if (e == f) {\r\n            a.add(e);\r\n            return a;\r\n        }\r\n        a.add(e);\r\n        FastFlattener.i(a, b, c, d, e, f, g);\r\n        a.add(f);\r\n        return a;\r\n    };\r\n    FastFlattener.h = function (a, b, c, d, e, f) {\r\n        var g = b[d];\r\n        var h = c[d];\r\n        while ((isNaN_(g) || isNaN_(h)) && d < e) {\r\n            ++d;\r\n            g = b[d];\r\n            h = c[d];\r\n        }\r\n        var i = b[e];\r\n        var j = c[e];\r\n        while ((isNaN_(i) || isNaN_(j)) && d < e) {\r\n            --e;\r\n            i = b[e];\r\n            j = c[e];\r\n        }\r\n        if (d + 1 >= e) {\r\n            return;\r\n        }\r\n        var k = -1;\r\n        var l = f * f;\r\n        var m;\r\n        var n;\r\n        m = i - g;\r\n        n = j - h;\r\n        var o = m * m + n * n;\r\n        if (o == 0) {\r\n            for (var p = d + 1; p < e; ++p) {\r\n                var q = b[p];\r\n                var r = c[p];\r\n                if (isNaN_(q) || isNaN_(r)) {\r\n                    continue;\r\n                }\r\n                m = i - q;\r\n                n = j - r;\r\n                var s = m * m + n * n;\r\n                if (s >= l) {\r\n                    l = s;\r\n                    k = p;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var t = i - g;\r\n            var u = j - h;\r\n            for (var v = d + 1; v < e; ++v) {\r\n                var w = b[v];\r\n                var x = c[v];\r\n                if (isNaN_(w) || isNaN_(x)) {\r\n                    continue;\r\n                }\r\n                var y = NaN;\r\n                var z = b[v] - g;\r\n                var aa = c[v] - h;\r\n                var ab = t * z + u * aa;\r\n                if (ab <= 0) {\r\n                    m = g - w;\r\n                    n = h - x;\r\n                    y = m * m + n * n;\r\n                }\r\n                else {\r\n                    var ac = t * t + u * u;\r\n                    if (ac <= ab) {\r\n                        m = i - w;\r\n                        n = j - x;\r\n                        y = m * m + n * n;\r\n                    }\r\n                    else {\r\n                        var ad = ab / ac;\r\n                        m = g + ad * t - w;\r\n                        n = h + ad * u - x;\r\n                        y = m * m + n * n;\r\n                    }\r\n                }\r\n                if (y >= l) {\r\n                    l = y;\r\n                    k = v;\r\n                }\r\n            }\r\n        }\r\n        if (k != -1) {\r\n            FastFlattener.h(a, b, c, d, k, f);\r\n            a.add(k);\r\n            FastFlattener.h(a, b, c, k, e, f);\r\n        }\r\n        return;\r\n    };\r\n    FastFlattener.i = function (a, b, c, d, e, f, g) {\r\n        var h = b._inner[e];\r\n        var i, j;\r\n        i = h[c];\r\n        j = h[d];\r\n        while ((i != i) || (j != j) && e < f) {\r\n            ++e;\r\n            h = b._inner[e];\r\n            i = h[c];\r\n            j = h[d];\r\n        }\r\n        var k = b._inner[f];\r\n        var l, m;\r\n        l = k[c];\r\n        m = k[d];\r\n        while ((l != l) || (m != m) && e < f) {\r\n            --f;\r\n            k = b._inner[f];\r\n            l = k[c];\r\n            m = k[d];\r\n        }\r\n        if (e + 1 >= f) {\r\n            return;\r\n        }\r\n        var n = -1;\r\n        var o = g * g;\r\n        var p;\r\n        var q;\r\n        p = l - i;\r\n        q = m - j;\r\n        var r = p * p + q * q;\r\n        if (r == 0) {\r\n            for (var s = e + 1; s < f; ++s) {\r\n                var t = b._inner[s];\r\n                var u = void 0, v = void 0;\r\n                u = t[c];\r\n                v = t[d];\r\n                if ((u != u) || (v != v)) {\r\n                    continue;\r\n                }\r\n                p = l - u;\r\n                q = m - v;\r\n                var w = p * p + q * q;\r\n                if (w >= o) {\r\n                    o = w;\r\n                    n = s;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var x = l - i;\r\n            var y = m - j;\r\n            for (var z = e + 1; z < f; ++z) {\r\n                var aa = b._inner[z];\r\n                var ab = void 0, ac = void 0;\r\n                ab = aa[c];\r\n                ac = aa[d];\r\n                if ((ab != ab) || (ac != ac)) {\r\n                    continue;\r\n                }\r\n                var ad = NaN;\r\n                var ae = ab - i;\r\n                var af = ac - j;\r\n                var ag = x * ae + y * af;\r\n                if (ag <= 0) {\r\n                    p = i - ab;\r\n                    q = j - ac;\r\n                    ad = p * p + q * q;\r\n                }\r\n                else {\r\n                    var ah = x * x + y * y;\r\n                    if (ah <= ag) {\r\n                        p = l - ab;\r\n                        q = m - ac;\r\n                        ad = p * p + q * q;\r\n                    }\r\n                    else {\r\n                        var ai = ag / ah;\r\n                        p = i + ai * x - ab;\r\n                        q = j + ai * y - ac;\r\n                        ad = p * p + q * q;\r\n                    }\r\n                }\r\n                if (ad >= o) {\r\n                    o = ad;\r\n                    n = z;\r\n                }\r\n            }\r\n        }\r\n        if (n != -1) {\r\n            FastFlattener.i(a, b, c, d, e, n, g);\r\n            a.add(n);\r\n            FastFlattener.i(a, b, c, d, n, f, g);\r\n        }\r\n        return;\r\n    };\r\n    FastFlattener.$t = markType(FastFlattener, 'FastFlattener');\r\n    return FastFlattener;\r\n}(Base));\r\nexport { FastFlattener };\r\n//# sourceMappingURL=FastFlattener.js.map\r\n"]},"metadata":{},"sourceType":"module"}