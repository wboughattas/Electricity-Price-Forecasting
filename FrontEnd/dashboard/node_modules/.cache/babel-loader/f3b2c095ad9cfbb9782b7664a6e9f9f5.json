{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { List$1 } from \"./List$1\";\nimport { String_$type } from './type';\nimport { CssHelper } from './CssHelper';\nimport * as ReactDOM from 'react-dom';\nimport * as React from 'react';\nimport { TypeRegistrar } from \"./type\";\nimport { fromSpinal } from './componentUtil';\n\nvar ReactRenderer =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function ReactRenderer(container, document, useDefaultsSource, defaultsSource, portalManager) {\n    if (portalManager === void 0) {\n      portalManager = null;\n    }\n\n    this.container = container;\n    this._useDefaultsSource = false;\n    this._checkResized = null;\n    this._resizeListener = null;\n    this._resizeTicking = false;\n    this._portalManager = null;\n    this._resizeTickId = -1;\n    this._discStack = [];\n    this._toUnbind = [];\n    this._currentFontQuery = null;\n    this._document = document;\n    this._container = container;\n    this._rootElement = container;\n    this._rootWrapper = new ReactWrapper(this._rootElement, this);\n    this._cssHelper = new ReactCssHelper(this, this._document);\n    this._useDefaultsSource = useDefaultsSource;\n    this._defaultsSource = defaultsSource;\n    this._portalManager = portalManager;\n\n    if (this._portalManager) {\n      this._portalManager.renderer = this;\n    }\n  }\n\n  ReactRenderer.prototype.addSizeWatcher = function (onResized) {\n    var _this = this;\n\n    var previousWidth = this._rootElement.offsetWidth;\n    var previousHeight = this._rootElement.offsetHeight;\n    var previousRatio = window.devicePixelRatio;\n\n    if (this._checkResized == null) {\n      this._checkResized = function () {\n        var currWidth = _this._rootElement.offsetWidth;\n        var currHeight = _this._rootElement.offsetHeight;\n        var currRatio = window.devicePixelRatio;\n        var changed = false;\n\n        if (previousWidth != currWidth || previousHeight != currHeight || previousRatio != currRatio) {\n          changed = true;\n        }\n\n        previousWidth = currWidth;\n        previousHeight = currHeight;\n        previousRatio = currRatio;\n\n        if (changed) {\n          onResized();\n        }\n      };\n    }\n\n    this._resizeListener = this.globalListen(\"window\", \"resize\", function (ev) {\n      return _this._checkResized();\n    });\n    var self = this;\n    this._resizeTicking = true;\n\n    function resizeTick() {\n      self._resizeTickId = -1;\n\n      if (self._resizeTicking) {\n        self._checkResized();\n\n        self._resizeTickId = self.setTimeout(resizeTick, 100);\n      }\n    }\n\n    this._resizeTickId = this.setTimeout(resizeTick, 100);\n  };\n\n  ReactRenderer.prototype.destroy = function () {\n    for (var i = 0; i < this._toUnbind.length; i++) {\n      this._toUnbind[i]();\n    }\n\n    this._toUnbind = [];\n    this.removeSizeWatcher();\n\n    this._rootWrapper.destroy();\n\n    this._rootWrapper = null;\n    this._rootElement = null;\n  };\n\n  ReactRenderer.prototype.removeSizeWatcher = function () {\n    this._resizeTicking = false;\n\n    if (this._resizeTickId != -1) {\n      window.clearTimeout(this._resizeTickId);\n      this._resizeTickId = -1;\n    }\n\n    if (this._resizeListener != null) {\n      this._resizeListener();\n\n      this._resizeListener = null;\n    }\n  };\n\n  ReactRenderer.prototype.updateRoot = function (root) {\n    this._rootWrapper = root;\n    this._rootElement = root.getNativeElement();\n  };\n\n  ReactRenderer.prototype.withRenderer = function (act) {\n    act(this);\n  };\n\n  ReactRenderer.prototype.supportsAnimation = function () {\n    return true;\n  };\n\n  ReactRenderer.prototype.getRequestAnimationFrame = function () {\n    var ret = function (act) {\n      requestAnimationFrame(act);\n    };\n\n    return ret;\n  };\n\n  ReactRenderer.prototype.setTimeout = function (act, millisecondsDelay) {\n    var val;\n    val = window.setTimeout(act, millisecondsDelay);\n    return val;\n  };\n\n  ReactRenderer.prototype.clearTimeout = function (timerId) {\n    window.clearTimeout(timerId);\n  };\n\n  Object.defineProperty(ReactRenderer.prototype, \"rootWrapper\", {\n    get: function () {\n      return this._rootWrapper;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ReactRenderer.prototype.querySelector = function (selector) {\n    var _this = this;\n\n    var wrapper = null;\n    this.withRenderer(function (ren) {\n      var ele = _this.rootWrapper.getNativeElement().querySelector(selector);\n\n      if (ele === null) {\n        return null;\n      }\n\n      wrapper = new ReactWrapper(ele, ren);\n    });\n    return wrapper;\n  };\n\n  ReactRenderer.prototype.getWrapper = function (ele) {\n    if (!ele) {\n      return null;\n    }\n\n    var wrapper = null;\n    this.withRenderer(function (ren) {\n      wrapper = new ReactWrapper(ele, ren);\n    });\n    return wrapper;\n  };\n\n  ReactRenderer.prototype.getResourceString = function (resourceId) {\n    //TODO: fix this;\n    return \"\";\n  };\n\n  ReactRenderer.prototype.append = function (child) {\n    this._rootWrapper.append(child);\n\n    return this;\n  };\n\n  ReactRenderer.prototype.appendToBody = function (element) {\n    if (this._document !== null && this._document.body !== null) {\n      this._document.body.appendChild(element.getNativeElement());\n    }\n  };\n\n  ReactRenderer.prototype.createElement = function (elementName) {\n    var _this = this;\n\n    var ele;\n    this.withRenderer(function (ren) {\n      ele = _this._document.createElement(elementName);\n    });\n    var wrap = new ReactWrapper(ele, this);\n    return wrap;\n  };\n\n  ReactRenderer.prototype.createElementNS = function (elementName, ns) {\n    var _this = this;\n\n    var ele;\n    this.withRenderer(function (ren) {\n      ele = _this._document.createElementNS(ns, elementName);\n    });\n    var wrap = new ReactWrapper(ele, this);\n    return wrap;\n  };\n\n  ReactRenderer.prototype.endCSSQuery = function () {\n    this._currentFontQuery = null;\n\n    if (!this.hasBody()) {\n      return;\n    }\n\n    if (this._discStack.length > 0) {\n      var toRemove = this._discStack.pop();\n\n      toRemove.remove();\n    }\n  };\n\n  ReactRenderer.prototype.expandTemplate = function (template, args) {\n    throw new Error(\"not implemented\");\n  };\n\n  ReactRenderer.prototype.get2DCanvasContext = function (canvas) {\n    var context = null;\n    this.withRenderer(function (ren) {\n      var canv = canvas.getNativeElement();\n      context = canv.getContext(\"2d\");\n    });\n    return context;\n  };\n\n  Object.defineProperty(ReactRenderer.prototype, \"isComputedFontQuery\", {\n    get: function () {\n      return this._currentFontQuery != null && this.hasBody();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ReactRenderer.prototype.getCssDefaultPropertyValue = function (className, propertyName) {\n    if (this._useDefaultsSource && !this.isComputedFontQuery) {\n      var c = this._defaultsSource[className];\n\n      if (className == \"\" || className == null) {\n        c = this._defaultsSource;\n      }\n\n      if (c === undefined) {\n        return null;\n      }\n\n      var v = c[propertyName];\n\n      if (v === undefined) {\n        return null;\n      }\n\n      return v;\n    }\n\n    return this._cssHelper.getPropertyValue(this.getCurrentDiscovery(), className, propertyName);\n  };\n\n  ReactRenderer.prototype.getCssDefaultValuesForClassCollection = function (classPrefix, propertyNames) {\n    if (this._useDefaultsSource) {\n      var ret = [];\n\n      for (var k in this._defaultsSource) {\n        if (k.indexOf(classPrefix) === 0) {\n          var subRet = [];\n          ret.push(subRet);\n\n          for (var i = 0; i < propertyNames.length; i++) {\n            var v = this._defaultsSource[k][propertyNames[i]];\n\n            if (v === undefined) {\n              subRet.push(null);\n            } else {\n              subRet.push(v);\n            }\n          }\n        }\n      }\n\n      return ret;\n    }\n\n    return this._cssHelper.getValuesForClassCollection(this.getCurrentDiscovery(), classPrefix, propertyNames);\n  };\n\n  ReactRenderer.prototype.getDefaultFontHeight = function () {\n    if (this._defaultsSource[\"default-font-height\"] !== undefined) {\n      return +this._defaultsSource[\"default-font-height\"];\n    }\n\n    return 16;\n  };\n\n  ReactRenderer.prototype.getHeightForFontString = function (fontString, text, useOffsetHeight) {\n    if (this._rootWrapper.getNativeElement() == null) {\n      //TODO: some voodoo here.\n      return 12;\n    }\n\n    this.startCSSQuery();\n    var disc = this.getCurrentDiscovery();\n\n    if (disc == null || !this.hasWindow) {\n      return this.getDefaultFontHeight();\n    }\n\n    if (disc.getNativeElement().parentElement) {\n      disc.getNativeElement().parentElement.removeChild(disc.getNativeElement());\n    }\n\n    disc.setStyleProperty(\"position\", \"absolute\");\n    disc.setStyleProperty(\"visibility\", \"hidden\");\n    disc.setStyleProperty(\"font\", fontString);\n    document.body.appendChild(disc.getNativeElement());\n    var span;\n    this.withRenderer(function (ren) {\n      span = ren.createElement(\"span\");\n    });\n    var spanWrap = new ReactWrapper(span, this);\n    this.getCurrentDiscovery().append(spanWrap);\n    spanWrap.setText(text);\n    var height;\n\n    if (useOffsetHeight) {\n      var offHeight = spanWrap.getNativeElement().offsetHeight;\n      height = offHeight;\n    } else {\n      height = spanWrap.getNativeElement().height();\n    }\n\n    if (height == 0) {\n      //HACK: HACK! HACK! HACK!\n      return this.getDefaultFontHeight();\n    } //console.log(\"font height: \" + height);\n\n\n    document.body.removeChild(disc.getNativeElement());\n    this.endCSSQuery();\n    return height;\n  };\n\n  ReactRenderer.prototype.getSubRenderer = function (root) {\n    var elem = root;\n    elem = elem.getNativeElement();\n    return new ReactRenderer(elem, this._document, this._useDefaultsSource, this._defaultsSource, this._portalManager);\n  };\n\n  ReactRenderer.prototype.listen = function (element, eventName, handler) {\n    var retVal = null;\n\n    if (element == \"window\") {\n      element = window;\n    }\n\n    if (element == \"document\") {\n      element = document;\n    }\n\n    var $self = this;\n    var ret = element.addEventListener(eventName, handler);\n    var self = this;\n\n    retVal = function () {\n      var ind = self._toUnbind.indexOf(retVal);\n\n      if (ind >= 0) {\n        self._toUnbind.splice(ind, 1);\n      }\n\n      element.removeEventListener(eventName, handler);\n      handler = null;\n    };\n\n    this._toUnbind.push(retVal);\n\n    return retVal;\n  };\n\n  ReactRenderer.prototype.runInMainZone = function (action) {\n    action();\n  };\n\n  ReactRenderer.prototype.globalListen = function (element, eventName, handler) {\n    var retVal = null; //this._ngZone.runOutsideAngular(() => {\n\n    var $self = this;\n\n    var a = function (e) {\n      var inner = {}; //TODO: normalize here?\n\n      inner.originalEvent = e;\n      inner.altKey = e.altKey;\n      inner.button = e.button;\n      inner.ctrlKey = e.ctrlKey;\n      inner.offsetX = e.offsetX;\n      inner.offsetY = e.offsetY;\n      inner.pageX = e.pageX;\n      inner.pageY = e.pageY;\n\n      if (e.touches && e.touches.length > 0) {\n        inner.pageX = e.touches[0].pageX;\n        inner.pageY = e.touches[0].pageY;\n      }\n\n      inner.shiftKey = e.shiftKey;\n      inner.which = e.which;\n\n      inner.preventDefault = function () {\n        e.preventDefault();\n      };\n\n      inner.stopPropagation = function () {\n        e.stopPropagation();\n      }; //console.log(e);\n\n\n      handler(inner);\n    };\n\n    var ret = this.listen(element, eventName, a);\n    var self = this;\n\n    retVal = function () {\n      var ind = self._toUnbind.indexOf(retVal);\n\n      if (ind >= 0) {\n        self._toUnbind.splice(ind, 1);\n      }\n\n      ret();\n      a = null;\n    };\n\n    this._toUnbind.push(retVal); //});\n\n\n    return retVal;\n  };\n\n  ReactRenderer.prototype.hasBody = function () {\n    return this._document !== null && this._document.body !== null;\n  };\n\n  ReactRenderer.prototype.hasWindow = function () {\n    //todo: hmmm\n    return true;\n  };\n\n  ReactRenderer.prototype.getCurrentDiscovery = function () {\n    if (this._discStack.length <= 0) {\n      return null;\n    }\n\n    return this._discStack[this._discStack.length - 1];\n  };\n\n  ReactRenderer.prototype.setCssQueryFontString = function (fontString) {\n    if (this._useDefaultsSource) {\n      this._currentFontQuery = fontString;\n    }\n\n    this.getCurrentDiscovery().setStyleProperty(\"font\", fontString);\n  };\n\n  ReactRenderer.prototype.startCSSQuery = function () {\n    if (!this.hasBody()) {\n      return;\n    }\n\n    var disc = this._cssHelper.getDiscoveryElement(this._rootElement);\n\n    this._discStack.push(disc);\n\n    this._rootWrapper.append(disc);\n  };\n\n  ReactRenderer.prototype.supportsDOMEvents = function () {\n    //todo: hmmm.\n    return true;\n  };\n\n  ReactRenderer.prototype.getPortal = function (hostElement, elementTag, portalCallback, isContentPortal) {\n    if (this._portalManager) {\n      this._portalManager.getPortal(hostElement, elementTag, portalCallback, isContentPortal);\n    }\n  };\n\n  ReactRenderer.prototype.getExternal = function (internalComponent, styleSourceElement, optionalParent) {\n    if (optionalParent === void 0) {\n      optionalParent = null;\n    }\n\n    if (internalComponent.externalObject) {\n      return internalComponent.externalObject;\n    }\n\n    var ext = null;\n\n    if (!internalComponent.$type) {\n      return null;\n    }\n\n    var name = internalComponent.$type.name;\n    var externalName = \"Igr\" + name;\n\n    if (!TypeRegistrar.isRegistered(externalName)) {\n      return null;\n    }\n\n    ext = TypeRegistrar.create(externalName);\n\n    if (ext) {\n      ext._implementation = internalComponent;\n      internalComponent.externalObject = ext;\n    }\n\n    if (styleSourceElement) {\n      if (ext._styling) {\n        ext._styling(styleSourceElement.getNativeElement(), ext, optionalParent);\n      }\n    }\n\n    return ext;\n  };\n\n  return ReactRenderer;\n}();\n\nexport { ReactRenderer };\n\nvar ReactWrapper =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function ReactWrapper(element, renderer) {\n    this.renderer = renderer;\n    this._toUnbind = [];\n    this._attrCache = new Map();\n    this._styleCache = new Map();\n    this._innerText = undefined;\n\n    if (element.getNativeElement) {\n      element = element.getNativeElement();\n    }\n\n    this.ele = element;\n    this._toUnbind = [];\n  }\n\n  ReactWrapper.prototype.destroy = function () {\n    this.unlistenAll();\n    this.ele = null;\n  };\n\n  ReactWrapper.prototype.withRenderer = function (act) {\n    act(this.renderer);\n  };\n\n  ReactWrapper.prototype.addClass = function (className) {\n    var _this = this;\n\n    if (className == null || className.length == 0) {\n      return this;\n    }\n\n    this.withRenderer(function (ren) {\n      className.split(\" \").forEach(function (item) {\n        return _this.ele.classList.add(item);\n      });\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.append = function (child) {\n    var _this = this;\n\n    this.withRenderer(function (ren) {\n      _this.ele.appendChild(child.getNativeElement());\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.getAttribute = function (propertyName) {\n    if (this._attrCache.has(propertyName)) {\n      return this._attrCache.get(propertyName);\n    }\n\n    return null;\n  };\n\n  ReactWrapper.prototype.setAttribute = function (propertyName, value) {\n    var _this = this;\n\n    this._attrCache.set(propertyName, value);\n\n    this.withRenderer(function (ren) {\n      _this.ele.setAttribute(propertyName, value);\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.before = function (child) {\n    if (this.ele.parentElement) {\n      this.ele.parentElement.insertBefore(child.getNativeElement(), this.ele); // this.insertBefore(child.getNativeElement());\n    }\n\n    return this;\n  };\n\n  ReactWrapper.prototype.clone = function () {\n    return new ReactWrapper(this.getNativeElement().cloneNode(true), this.renderer);\n  };\n\n  ReactWrapper.prototype.getStyleProperty = function (propertyName) {\n    if (this.getNativeElement() !== null) {\n      if (getComputedStyle !== undefined) {\n        var computed = getComputedStyle(this.getNativeElement()); //console.log(\"getting computed value for: \" + propertyName + \": \" + computed[propertyName]);\n\n        return computed[propertyName];\n      }\n    }\n\n    if (this._styleCache.has(propertyName)) {\n      return this._styleCache.get(propertyName);\n    }\n\n    return null;\n  };\n\n  ReactWrapper.prototype.setStyleProperty = function (propertyName, value) {\n    var _this = this;\n\n    this._styleCache.set(propertyName, value);\n\n    this.withRenderer(function (ren) {\n      _this.ele.style[propertyName] = value;\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.findByClass = function (className) {\n    if (className.substring(0, 1) == '.') {\n      className = className.substring(1);\n    }\n\n    var ret = this.ele.getElementsByClassName(className);\n    var retVal = [];\n    retVal.length = ret.length;\n\n    for (var i = 0; i < ret.length; i++) {\n      retVal[i] = new ReactWrapper(ret[i], this.renderer);\n    }\n\n    return retVal;\n  };\n\n  ReactWrapper.prototype.focus = function (preventScroll) {\n    if (this.getNativeElement() !== null && this.getNativeElement().focus !== undefined) {\n      if (preventScroll) {\n        this.getNativeElement().focus({\n          preventScroll: true\n        });\n      } else {\n        this.getNativeElement().focus();\n      }\n    }\n\n    return this;\n  };\n\n  ReactWrapper.prototype.getChildAt = function (i) {\n    var child = this.ele.children[i];\n    return new ReactWrapper(child, this.renderer);\n  };\n\n  ReactWrapper.prototype.getChildCount = function () {\n    return this.ele.children.length;\n  };\n\n  ReactWrapper.prototype.getNativeElement = function () {\n    var _this = this;\n\n    var nativeElement = null;\n    this.withRenderer(function (ren) {\n      if (_this.ele == null) {\n        nativeElement = null;\n        return;\n      }\n\n      if (_this.ele.getNativeElement == undefined) {\n        nativeElement = _this.ele;\n        return nativeElement;\n      }\n\n      nativeElement = _this.ele.getNativeElement();\n    });\n    return nativeElement;\n  };\n\n  ReactWrapper.prototype.height = function () {\n    var ret = this.getStyleProperty(\"height\");\n\n    if (ret == null) {\n      //todo: some voodoo here.\n      return 500;\n    }\n\n    var val = parseFloat(ret.replace(\"px\", \"\"));\n\n    if (isNaN(val)) {\n      return 0;\n    }\n\n    return val;\n  };\n\n  ReactWrapper.prototype.hide = function () {\n    this.setStyleProperty(\"display\", \"none\");\n    return this;\n  };\n\n  ReactWrapper.prototype.listen = function (eventName, handler) {\n    var retVal = null; //this.ngZone.runOutsideAngular(() => {\n\n    var $self = this;\n\n    var a = function (e) {\n      var inner = {}; //TODO: normalize here?\n\n      inner.originalEvent = e;\n      inner.altKey = e.altKey;\n      inner.button = e.button;\n      inner.ctrlKey = e.ctrlKey;\n      inner.offsetX = e.offsetX;\n      inner.offsetY = e.offsetY;\n      inner.pageX = e.pageX;\n      inner.pageY = e.pageY;\n\n      if (e.touches && e.touches.length > 0) {\n        inner.pageX = e.touches[0].pageX;\n        inner.pageY = e.touches[0].pageY;\n      }\n\n      inner.shiftKey = e.shiftKey;\n      inner.which = e.which;\n\n      inner.preventDefault = function () {\n        e.preventDefault();\n      };\n\n      inner.stopPropagation = function () {\n        e.stopPropagation();\n      }; //console.log(e);\n\n\n      handler(inner);\n    };\n\n    var ret = this.renderer.listen(this.ele, eventName, a);\n    var self = this;\n\n    retVal = function () {\n      var ind = self._toUnbind.indexOf(retVal);\n\n      if (ind >= 0) {\n        self._toUnbind.splice(ind, 1);\n      }\n\n      ret();\n      a = null;\n    };\n\n    this._toUnbind.push(retVal); //});\n\n\n    return retVal;\n  };\n\n  ReactWrapper.prototype.getOffsetHelper = function (ele) {\n    var clientRect = ele.getBoundingClientRect();\n    return {\n      top: clientRect.top + window.pageYOffset,\n      left: clientRect.left + window.pageXOffset\n    };\n  };\n\n  ReactWrapper.prototype.getOffset = function () {\n    return this.getOffsetHelper(this.getNativeElement());\n  };\n\n  ReactWrapper.prototype.setOffset = function (x, y) {\n    var par = this.getNativeElement().offsetParent || this.getNativeElement().parentElement;\n    var parentOffset = this.getOffsetHelper(par);\n    return this.setRawPosition(x - parentOffset.left, y - parentOffset.top); //return this;\n  };\n\n  ReactWrapper.prototype.outerHeight = function () {\n    return this.getProperty(\"offsetHeight\");\n  };\n\n  ReactWrapper.prototype.outerHeightWithMargin = function () {\n    var height = this.outerHeight();\n    height += parseInt(this.getStyleProperty(\"marginTop\"));\n    height += parseInt(this.getStyleProperty(\"marginBottom\"));\n    return height;\n  };\n\n  ReactWrapper.prototype.outerWidth = function () {\n    return this.getProperty(\"offsetWidth\");\n  };\n\n  ReactWrapper.prototype.outerWidthWithMargin = function () {\n    var width = this.outerWidth();\n    width += parseInt(this.getStyleProperty(\"marginLeft\"));\n    width += parseInt(this.getStyleProperty(\"marginRight\"));\n    return width;\n  };\n\n  ReactWrapper.prototype.getProperty = function (propertyName) {\n    var native = this.getNativeElement();\n    return native[propertyName];\n  };\n\n  ReactWrapper.prototype.setProperty = function (propertyName, value) {\n    var _this = this;\n\n    this.withRenderer(function (ren) {\n      _this.ele[propertyName] = value;\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.remove = function () {\n    var _this = this;\n\n    this.withRenderer(function (ren) {\n      var ele = _this.getNativeElement();\n\n      if (ele.parentElement != null) {\n        _this.ele.parentElement.removeChild(ele);\n      } //ren.detachView([this.getNativeElement()]);\n\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.removeChild = function (child) {\n    var _this = this;\n\n    this.withRenderer(function (ren) {\n      _this.ele.removeChild(child.getNativeElement()); //ren.detachView([child.getNativeElement()]);\n\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.removeChildren = function () {\n    for (var i = this.getChildCount() - 1; i >= 0; i--) {\n      this.removeChild(this.getChildAt(i));\n    }\n\n    return this;\n  };\n\n  ReactWrapper.prototype.removeClass = function (className) {\n    var _this = this;\n\n    if (className == null || className.length == 0) {\n      return this;\n    }\n\n    this.withRenderer(function (ren) {\n      className.split(\" \").forEach(function (item) {\n        return _this.ele.classList.remove(item);\n      });\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.setRawStyleProperty = function (propertyName, value) {\n    //this.withRenderer((ren) => {\n    this.ele.style[propertyName] = value; //})\n\n    return this;\n  };\n\n  ReactWrapper.prototype.setRawPosition = function (x, y) {\n    this.ele.style.left = x + \"px\";\n    this.ele.style.top = y + \"px\";\n    return this;\n  };\n\n  ReactWrapper.prototype.setRawXPosition = function (x) {\n    this.ele.style.left = x + \"px\";\n    return this;\n  };\n\n  ReactWrapper.prototype.setRawYPosition = function (y) {\n    this.ele.style.top = y + \"px\";\n    return this;\n  };\n\n  ReactWrapper.prototype.setRawSize = function (width, height) {\n    this.ele.style.width = width + \"px\";\n    this.ele.style.height = height + \"px\";\n    return this;\n  };\n\n  ReactWrapper.prototype.show = function () {\n    this.setStyleProperty(\"display\", \"\");\n    return this;\n  };\n\n  ReactWrapper.prototype.getText = function () {\n    if (this._innerText != undefined) {\n      return this._innerText;\n    }\n\n    return this.getNativeElement().innerText;\n  };\n\n  ReactWrapper.prototype.setText = function (value) {\n    var _this = this;\n\n    this._innerText = value;\n    this.withRenderer(function (ren) {\n      //workaround warning:\n      _this.getNativeElement().innerText = value; //ren.setText(this.ele, value);\n    });\n    return this;\n  };\n\n  ReactWrapper.prototype.setRawText = function (value) {\n    this._innerText = value;\n    this.ele.textContent = value;\n    return this;\n  };\n\n  ReactWrapper.prototype.unlistenAll = function () {\n    var toUnbind = [];\n\n    for (var i = 0; i < this._toUnbind.length; i++) {\n      toUnbind.push(this._toUnbind[i]);\n    }\n\n    for (var i = 0; i < toUnbind.length; i++) {\n      toUnbind[i]();\n    }\n\n    this._toUnbind.length = 0;\n    return this;\n  };\n\n  ReactWrapper.prototype.width = function () {\n    var ret = this.getStyleProperty(\"width\");\n\n    if (ret == null) {\n      //todo: some voodoo here.\n      return 500;\n    }\n\n    var val = parseFloat(ret.replace(\"px\", \"\"));\n\n    if (isNaN(val)) {\n      return 0;\n    }\n\n    return val;\n  };\n\n  ReactWrapper.prototype.parent = function () {\n    return this.ele == null || this.ele.parentElement == null ? null : new ReactWrapper(this.ele.parentElement, this.renderer);\n  };\n\n  ReactWrapper.prototype.querySelectorAll = function (selector) {\n    var elements = this.ele.querySelectorAll(selector);\n    var result = [];\n\n    for (var ii = 0; ii < elements.length; ii++) {\n      result.push(new ReactWrapper(elements[ii], this.renderer));\n    }\n\n    return result;\n  };\n\n  return ReactWrapper;\n}();\n\nexport { ReactWrapper };\n\nvar ReactCssHelper =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function ReactCssHelper(renderer, document) {\n    this.renderer = renderer;\n    this.document = document;\n  }\n\n  ReactCssHelper.prototype.getDiscoveryElement = function (container) {\n    //console.log(container);\n    var ele = this.renderer.createElement(\"fakediscoveryelement\");\n    var wrapper = new ReactWrapper(ele, this.renderer);\n    wrapper.setStyleProperty(\"box-sizing\", \"content-box\");\n    return wrapper;\n  };\n\n  ReactCssHelper.prototype.getPropertyValue = function (discoveryElement, className, propertyName) {\n    //console.log(\"fetching: \" + className + \", prop: \" + propertyName);\n    var ret = CssHelper.getPropertyValue1(discoveryElement, className, propertyName); //console.log(\"for: \" + className + \", prop: \" + propertyName + \" value: \" + ret);\n\n    return ret;\n  };\n\n  ReactCssHelper.prototype.getValuesForClassCollection = function (discoveryElement, classPrefix, propertyNames) {\n    var prop = new List$1(String_$type, 0);\n\n    for (var i = 0; i < propertyNames.length; i++) {\n      prop.add(propertyNames[i]);\n    }\n\n    var ret = CssHelper.getValuesForClassCollection(discoveryElement, classPrefix, prop);\n    var retVal = new Array(ret.count);\n\n    for (var i1 = 0; i1 < ret.count; i1++) {\n      retVal[i1] = new Array(ret._inner[i1].count);\n\n      for (var j = 0; j < ret._inner[i1].count; j++) {\n        retVal[i1][j] = ret._inner[i1]._inner[j];\n      }\n    }\n\n    return retVal;\n  };\n\n  return ReactCssHelper;\n}();\n\nvar PortalManager =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function PortalManager(id, requestRender) {\n    this.disableContentPortal = false;\n    this._portals = [];\n    this._portalsMap = new Map();\n    this._id = null;\n    this._currId = 0;\n    this._requestRender = requestRender;\n    this._onPortalRef = this._onPortalRef.bind(this);\n    this._id = id;\n  }\n\n  PortalManager.prototype.onRender = function (children) {\n    if (this._portals && this._portals.length > 0) {\n      //children = React.Children.toArray(this.props.children);\n      for (var i = 0; i < this._portals.length; i++) {\n        var p = this._portals[i];\n\n        if (p.isContentPortal && !this.disableContentPortal) {\n          var mine = children.slice(0);\n          children.length = 0;\n\n          var n = p._createPortal(mine);\n\n          p._nativePortal = n;\n        } else {\n          var n = p._createPortal(null);\n\n          p._nativePortal = n;\n        }\n\n        children.push(p._nativePortal);\n      }\n    }\n  };\n\n  PortalManager.prototype.getId = function () {\n    return this._id + \"__\" + (this._currId++).toString();\n  };\n\n  PortalManager.prototype.getPortal = function (hostElement, elementTag, portalCallback, isContentPortal) {\n    var portal = new ReactDomPortal(this, hostElement, elementTag, portalCallback, this.getId(), this._onPortalRef, isContentPortal);\n\n    this._portals.push(portal);\n\n    this._portalsMap.set(portal._portalId, portal);\n\n    this._requestRender();\n  };\n\n  PortalManager.prototype._onPortalRef = function (ele) {\n    if (ele != null) {\n      var key = ele.props.id;\n\n      if (this._portalsMap.has(key)) {\n        var p = this._portalsMap.get(key);\n\n        p._onComponentProvided(ele);\n      }\n    }\n  };\n\n  PortalManager.prototype._destroy = function (portal) {\n    var ind = this._portals.indexOf(portal);\n\n    this._portalsMap.delete(portal._portalId);\n\n    this._portals.splice(ind, 1);\n\n    this._requestRender();\n  };\n\n  return PortalManager;\n}();\n\nexport { PortalManager };\n\nvar ReactDomPortal =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function ReactDomPortal(portalManager, hostElement, elementTag, portalCallback, portalId, portalRef, isContentPortal) {\n    this._portalRef = null;\n    this.portalContainer = hostElement;\n    this._elementTag = elementTag;\n    this._portalCallback = portalCallback;\n    this._portalId = portalId;\n    this.isContentPortal = isContentPortal;\n    this._portalRef = portalRef;\n    this._owner = portalManager;\n  }\n\n  ReactDomPortal.prototype.destroy = function () {\n    this._owner._destroy(this);\n  };\n\n  ReactDomPortal.prototype._onComponentProvided = function (ele) {\n    var oldValue = this.componentRef;\n    this.componentRef = ele;\n\n    if (oldValue !== this.componentRef) {\n      this._portalCallback(this);\n    }\n  };\n\n  ReactDomPortal.prototype.toPascal = function (name) {\n    var val = fromSpinal(name);\n    return val.substr(0, 1).toUpperCase() + val.substr(1);\n  };\n\n  ReactDomPortal.prototype.createElementFromTag = function (elementTag, portalId, portalRef, children) {\n    if (elementTag.indexOf(\"-\") >= 0) {\n      elementTag = this.toPascal(elementTag);\n    }\n\n    var name = \"Igr\" + elementTag;\n    var ele = TypeRegistrar.get(name);\n    var rEle = React.createElement(ele, {\n      ref: portalRef,\n      key: portalId,\n      id: portalId,\n      children: children\n    });\n    return rEle;\n  };\n\n  ReactDomPortal.prototype._createPortal = function (children) {\n    var reactEle = this.createElementFromTag(this._elementTag, this._portalId, this._portalRef, children);\n    this._nativePortal = ReactDOM.createPortal(reactEle, this.portalContainer.getNativeElement(), this._portalId);\n    return this._nativePortal;\n  };\n\n  return ReactDomPortal;\n}();","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/react-renderer.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { List$1 } from \"./List$1\";\nimport { String_$type } from './type';\nimport { CssHelper } from './CssHelper';\nimport * as ReactDOM from 'react-dom';\nimport * as React from 'react';\nimport { TypeRegistrar } from \"./type\";\nimport { fromSpinal } from './componentUtil';\nvar ReactRenderer = /** @class */ /*@__PURE__*/ (function () {\n    function ReactRenderer(container, document, useDefaultsSource, defaultsSource, portalManager) {\n        if (portalManager === void 0) {\n            portalManager = null;\n        }\n        this.container = container;\n        this._useDefaultsSource = false;\n        this._checkResized = null;\n        this._resizeListener = null;\n        this._resizeTicking = false;\n        this._portalManager = null;\n        this._resizeTickId = -1;\n        this._discStack = [];\n        this._toUnbind = [];\n        this._currentFontQuery = null;\n        this._document = document;\n        this._container = container;\n        this._rootElement = container;\n        this._rootWrapper = new ReactWrapper(this._rootElement, this);\n        this._cssHelper = new ReactCssHelper(this, this._document);\n        this._useDefaultsSource = useDefaultsSource;\n        this._defaultsSource = defaultsSource;\n        this._portalManager = portalManager;\n        if (this._portalManager) {\n            this._portalManager.renderer = this;\n        }\n    }\n    ReactRenderer.prototype.addSizeWatcher = function (onResized) {\n        var _this = this;\n        var previousWidth = this._rootElement.offsetWidth;\n        var previousHeight = this._rootElement.offsetHeight;\n        var previousRatio = window.devicePixelRatio;\n        if (this._checkResized == null) {\n            this._checkResized = function () {\n                var currWidth = _this._rootElement.offsetWidth;\n                var currHeight = _this._rootElement.offsetHeight;\n                var currRatio = window.devicePixelRatio;\n                var changed = false;\n                if (previousWidth != currWidth ||\n                    previousHeight != currHeight ||\n                    previousRatio != currRatio) {\n                    changed = true;\n                }\n                previousWidth = currWidth;\n                previousHeight = currHeight;\n                previousRatio = currRatio;\n                if (changed) {\n                    onResized();\n                }\n            };\n        }\n        this._resizeListener = this.globalListen(\"window\", \"resize\", function (ev) { return _this._checkResized(); });\n        var self = this;\n        this._resizeTicking = true;\n        function resizeTick() {\n            self._resizeTickId = -1;\n            if (self._resizeTicking) {\n                self._checkResized();\n                self._resizeTickId = self.setTimeout(resizeTick, 100);\n            }\n        }\n        this._resizeTickId = this.setTimeout(resizeTick, 100);\n    };\n    ReactRenderer.prototype.destroy = function () {\n        for (var i = 0; i < this._toUnbind.length; i++) {\n            this._toUnbind[i]();\n        }\n        this._toUnbind = [];\n        this.removeSizeWatcher();\n        this._rootWrapper.destroy();\n        this._rootWrapper = null;\n        this._rootElement = null;\n    };\n    ReactRenderer.prototype.removeSizeWatcher = function () {\n        this._resizeTicking = false;\n        if (this._resizeTickId != -1) {\n            window.clearTimeout(this._resizeTickId);\n            this._resizeTickId = -1;\n        }\n        if (this._resizeListener != null) {\n            this._resizeListener();\n            this._resizeListener = null;\n        }\n    };\n    ReactRenderer.prototype.updateRoot = function (root) {\n        this._rootWrapper = root;\n        this._rootElement = root.getNativeElement();\n    };\n    ReactRenderer.prototype.withRenderer = function (act) {\n        act(this);\n    };\n    ReactRenderer.prototype.supportsAnimation = function () {\n        return true;\n    };\n    ReactRenderer.prototype.getRequestAnimationFrame = function () {\n        var ret = function (act) {\n            requestAnimationFrame(act);\n        };\n        return ret;\n    };\n    ReactRenderer.prototype.setTimeout = function (act, millisecondsDelay) {\n        var val;\n        val = window.setTimeout(act, millisecondsDelay);\n        return val;\n    };\n    ReactRenderer.prototype.clearTimeout = function (timerId) {\n        window.clearTimeout(timerId);\n    };\n    Object.defineProperty(ReactRenderer.prototype, \"rootWrapper\", {\n        get: function () {\n            return this._rootWrapper;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ReactRenderer.prototype.querySelector = function (selector) {\n        var _this = this;\n        var wrapper = null;\n        this.withRenderer(function (ren) {\n            var ele = _this.rootWrapper.getNativeElement().querySelector(selector);\n            if (ele === null) {\n                return null;\n            }\n            wrapper = new ReactWrapper(ele, ren);\n        });\n        return wrapper;\n    };\n    ReactRenderer.prototype.getWrapper = function (ele) {\n        if (!ele) {\n            return null;\n        }\n        var wrapper = null;\n        this.withRenderer(function (ren) {\n            wrapper = new ReactWrapper(ele, ren);\n        });\n        return wrapper;\n    };\n    ReactRenderer.prototype.getResourceString = function (resourceId) {\n        //TODO: fix this;\n        return \"\";\n    };\n    ReactRenderer.prototype.append = function (child) {\n        this._rootWrapper.append(child);\n        return this;\n    };\n    ReactRenderer.prototype.appendToBody = function (element) {\n        if (this._document !== null && this._document.body !== null) {\n            this._document.body.appendChild(element.getNativeElement());\n        }\n    };\n    ReactRenderer.prototype.createElement = function (elementName) {\n        var _this = this;\n        var ele;\n        this.withRenderer(function (ren) {\n            ele = _this._document.createElement(elementName);\n        });\n        var wrap = new ReactWrapper(ele, this);\n        return wrap;\n    };\n    ReactRenderer.prototype.createElementNS = function (elementName, ns) {\n        var _this = this;\n        var ele;\n        this.withRenderer(function (ren) {\n            ele = _this._document.createElementNS(ns, elementName);\n        });\n        var wrap = new ReactWrapper(ele, this);\n        return wrap;\n    };\n    ReactRenderer.prototype.endCSSQuery = function () {\n        this._currentFontQuery = null;\n        if (!this.hasBody()) {\n            return;\n        }\n        if (this._discStack.length > 0) {\n            var toRemove = this._discStack.pop();\n            toRemove.remove();\n        }\n    };\n    ReactRenderer.prototype.expandTemplate = function (template, args) {\n        throw new Error(\"not implemented\");\n    };\n    ReactRenderer.prototype.get2DCanvasContext = function (canvas) {\n        var context = null;\n        this.withRenderer(function (ren) {\n            var canv = (canvas.getNativeElement());\n            context = canv.getContext(\"2d\");\n        });\n        return context;\n    };\n    Object.defineProperty(ReactRenderer.prototype, \"isComputedFontQuery\", {\n        get: function () {\n            return this._currentFontQuery != null &&\n                this.hasBody();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ReactRenderer.prototype.getCssDefaultPropertyValue = function (className, propertyName) {\n        if (this._useDefaultsSource && !this.isComputedFontQuery) {\n            var c = this._defaultsSource[className];\n            if (className == \"\" || className == null) {\n                c = this._defaultsSource;\n            }\n            if (c === undefined) {\n                return null;\n            }\n            var v = c[propertyName];\n            if (v === undefined) {\n                return null;\n            }\n            return v;\n        }\n        return this._cssHelper.getPropertyValue(this.getCurrentDiscovery(), className, propertyName);\n    };\n    ReactRenderer.prototype.getCssDefaultValuesForClassCollection = function (classPrefix, propertyNames) {\n        if (this._useDefaultsSource) {\n            var ret = [];\n            for (var k in this._defaultsSource) {\n                if (k.indexOf(classPrefix) === 0) {\n                    var subRet = [];\n                    ret.push(subRet);\n                    for (var i = 0; i < propertyNames.length; i++) {\n                        var v = this._defaultsSource[k][propertyNames[i]];\n                        if (v === undefined) {\n                            subRet.push(null);\n                        }\n                        else {\n                            subRet.push(v);\n                        }\n                    }\n                }\n            }\n            return ret;\n        }\n        return this._cssHelper.getValuesForClassCollection(this.getCurrentDiscovery(), classPrefix, propertyNames);\n    };\n    ReactRenderer.prototype.getDefaultFontHeight = function () {\n        if (this._defaultsSource[\"default-font-height\"] !== undefined) {\n            return +this._defaultsSource[\"default-font-height\"];\n        }\n        return 16;\n    };\n    ReactRenderer.prototype.getHeightForFontString = function (fontString, text, useOffsetHeight) {\n        if (this._rootWrapper.getNativeElement() == null) {\n            //TODO: some voodoo here.\n            return 12;\n        }\n        this.startCSSQuery();\n        var disc = this.getCurrentDiscovery();\n        if (disc == null || !this.hasWindow) {\n            return this.getDefaultFontHeight();\n        }\n        if (disc.getNativeElement().parentElement) {\n            disc.getNativeElement().parentElement.removeChild(disc.getNativeElement());\n        }\n        disc.setStyleProperty(\"position\", \"absolute\");\n        disc.setStyleProperty(\"visibility\", \"hidden\");\n        disc.setStyleProperty(\"font\", fontString);\n        document.body.appendChild(disc.getNativeElement());\n        var span;\n        this.withRenderer(function (ren) {\n            span = ren.createElement(\"span\");\n        });\n        var spanWrap = new ReactWrapper(span, this);\n        this.getCurrentDiscovery().append(spanWrap);\n        spanWrap.setText(text);\n        var height;\n        if (useOffsetHeight) {\n            var offHeight = spanWrap.getNativeElement().offsetHeight;\n            height = offHeight;\n        }\n        else {\n            height = spanWrap.getNativeElement().height();\n        }\n        if (height == 0) {\n            //HACK: HACK! HACK! HACK!\n            return this.getDefaultFontHeight();\n        }\n        //console.log(\"font height: \" + height);\n        document.body.removeChild(disc.getNativeElement());\n        this.endCSSQuery();\n        return height;\n    };\n    ReactRenderer.prototype.getSubRenderer = function (root) {\n        var elem = root;\n        elem = elem.getNativeElement();\n        return new ReactRenderer(elem, this._document, this._useDefaultsSource, this._defaultsSource, this._portalManager);\n    };\n    ReactRenderer.prototype.listen = function (element, eventName, handler) {\n        var retVal = null;\n        if (element == \"window\") {\n            element = window;\n        }\n        if (element == \"document\") {\n            element = document;\n        }\n        var $self = this;\n        var ret = element.addEventListener(eventName, handler);\n        var self = this;\n        retVal = function () {\n            var ind = self._toUnbind.indexOf(retVal);\n            if (ind >= 0) {\n                self._toUnbind.splice(ind, 1);\n            }\n            element.removeEventListener(eventName, handler);\n            handler = null;\n        };\n        this._toUnbind.push(retVal);\n        return retVal;\n    };\n    ReactRenderer.prototype.runInMainZone = function (action) {\n        action();\n    };\n    ReactRenderer.prototype.globalListen = function (element, eventName, handler) {\n        var retVal = null;\n        //this._ngZone.runOutsideAngular(() => {\n        var $self = this;\n        var a = function (e) {\n            var inner = {};\n            //TODO: normalize here?\n            inner.originalEvent = e;\n            inner.altKey = e.altKey;\n            inner.button = e.button;\n            inner.ctrlKey = e.ctrlKey;\n            inner.offsetX = e.offsetX;\n            inner.offsetY = e.offsetY;\n            inner.pageX = e.pageX;\n            inner.pageY = e.pageY;\n            if (e.touches && e.touches.length > 0) {\n                inner.pageX = e.touches[0].pageX;\n                inner.pageY = e.touches[0].pageY;\n            }\n            inner.shiftKey = e.shiftKey;\n            inner.which = e.which;\n            inner.preventDefault = function () {\n                e.preventDefault();\n            };\n            inner.stopPropagation = function () {\n                e.stopPropagation();\n            };\n            //console.log(e);\n            handler(inner);\n        };\n        var ret = this.listen(element, eventName, a);\n        var self = this;\n        retVal = function () {\n            var ind = self._toUnbind.indexOf(retVal);\n            if (ind >= 0) {\n                self._toUnbind.splice(ind, 1);\n            }\n            ret();\n            a = null;\n        };\n        this._toUnbind.push(retVal);\n        //});\n        return retVal;\n    };\n    ReactRenderer.prototype.hasBody = function () {\n        return this._document !== null && this._document.body !== null;\n    };\n    ReactRenderer.prototype.hasWindow = function () {\n        //todo: hmmm\n        return true;\n    };\n    ReactRenderer.prototype.getCurrentDiscovery = function () {\n        if (this._discStack.length <= 0) {\n            return null;\n        }\n        return this._discStack[this._discStack.length - 1];\n    };\n    ReactRenderer.prototype.setCssQueryFontString = function (fontString) {\n        if (this._useDefaultsSource) {\n            this._currentFontQuery = fontString;\n        }\n        this.getCurrentDiscovery().setStyleProperty(\"font\", fontString);\n    };\n    ReactRenderer.prototype.startCSSQuery = function () {\n        if (!this.hasBody()) {\n            return;\n        }\n        var disc = this._cssHelper.getDiscoveryElement(this._rootElement);\n        this._discStack.push(disc);\n        this._rootWrapper.append(disc);\n    };\n    ReactRenderer.prototype.supportsDOMEvents = function () {\n        //todo: hmmm.\n        return true;\n    };\n    ReactRenderer.prototype.getPortal = function (hostElement, elementTag, portalCallback, isContentPortal) {\n        if (this._portalManager) {\n            this._portalManager.getPortal(hostElement, elementTag, portalCallback, isContentPortal);\n        }\n    };\n    ReactRenderer.prototype.getExternal = function (internalComponent, styleSourceElement, optionalParent) {\n        if (optionalParent === void 0) {\n            optionalParent = null;\n        }\n        if (internalComponent.externalObject) {\n            return internalComponent.externalObject;\n        }\n        var ext = null;\n        if (!internalComponent.$type) {\n            return null;\n        }\n        var name = internalComponent.$type.name;\n        var externalName = \"Igr\" + name;\n        if (!TypeRegistrar.isRegistered(externalName)) {\n            return null;\n        }\n        ext = TypeRegistrar.create(externalName);\n        if (ext) {\n            ext._implementation = internalComponent;\n            internalComponent.externalObject = ext;\n        }\n        if (styleSourceElement) {\n            if (ext._styling) {\n                ext._styling(styleSourceElement.getNativeElement(), ext, optionalParent);\n            }\n        }\n        return ext;\n    };\n    return ReactRenderer;\n}());\nexport { ReactRenderer };\nvar ReactWrapper = /** @class */ /*@__PURE__*/ (function () {\n    function ReactWrapper(element, renderer) {\n        this.renderer = renderer;\n        this._toUnbind = [];\n        this._attrCache = new Map();\n        this._styleCache = new Map();\n        this._innerText = undefined;\n        if (element.getNativeElement) {\n            element = element.getNativeElement();\n        }\n        this.ele = element;\n        this._toUnbind = [];\n    }\n    ReactWrapper.prototype.destroy = function () {\n        this.unlistenAll();\n        this.ele = null;\n    };\n    ReactWrapper.prototype.withRenderer = function (act) {\n        act(this.renderer);\n    };\n    ReactWrapper.prototype.addClass = function (className) {\n        var _this = this;\n        if (className == null || className.length == 0) {\n            return this;\n        }\n        this.withRenderer(function (ren) {\n            className.split(\" \").forEach(function (item) { return _this.ele.classList.add(item); });\n        });\n        return this;\n    };\n    ReactWrapper.prototype.append = function (child) {\n        var _this = this;\n        this.withRenderer(function (ren) {\n            _this.ele.appendChild(child.getNativeElement());\n        });\n        return this;\n    };\n    ReactWrapper.prototype.getAttribute = function (propertyName) {\n        if (this._attrCache.has(propertyName)) {\n            return this._attrCache.get(propertyName);\n        }\n        return null;\n    };\n    ReactWrapper.prototype.setAttribute = function (propertyName, value) {\n        var _this = this;\n        this._attrCache.set(propertyName, value);\n        this.withRenderer(function (ren) {\n            _this.ele.setAttribute(propertyName, value);\n        });\n        return this;\n    };\n    ReactWrapper.prototype.before = function (child) {\n        if (this.ele.parentElement) {\n            this.ele.parentElement.insertBefore(child.getNativeElement(), this.ele);\n            // this.insertBefore(child.getNativeElement());\n        }\n        return this;\n    };\n    ReactWrapper.prototype.clone = function () {\n        return new ReactWrapper(this.getNativeElement().cloneNode(true), this.renderer);\n    };\n    ReactWrapper.prototype.getStyleProperty = function (propertyName) {\n        if (this.getNativeElement() !== null) {\n            if (getComputedStyle !== undefined) {\n                var computed = getComputedStyle(this.getNativeElement());\n                //console.log(\"getting computed value for: \" + propertyName + \": \" + computed[propertyName]);\n                return computed[propertyName];\n            }\n        }\n        if (this._styleCache.has(propertyName)) {\n            return this._styleCache.get(propertyName);\n        }\n        return null;\n    };\n    ReactWrapper.prototype.setStyleProperty = function (propertyName, value) {\n        var _this = this;\n        this._styleCache.set(propertyName, value);\n        this.withRenderer(function (ren) {\n            _this.ele.style[propertyName] = value;\n        });\n        return this;\n    };\n    ReactWrapper.prototype.findByClass = function (className) {\n        if (className.substring(0, 1) == '.') {\n            className = className.substring(1);\n        }\n        var ret = this.ele.getElementsByClassName(className);\n        var retVal = [];\n        retVal.length = ret.length;\n        for (var i = 0; i < ret.length; i++) {\n            retVal[i] = new ReactWrapper(ret[i], this.renderer);\n        }\n        return retVal;\n    };\n    ReactWrapper.prototype.focus = function (preventScroll) {\n        if (this.getNativeElement() !== null && this.getNativeElement().focus !== undefined) {\n            if (preventScroll) {\n                this.getNativeElement().focus({ preventScroll: true });\n            }\n            else {\n                this.getNativeElement().focus();\n            }\n        }\n        return this;\n    };\n    ReactWrapper.prototype.getChildAt = function (i) {\n        var child = this.ele.children[i];\n        return new ReactWrapper(child, this.renderer);\n    };\n    ReactWrapper.prototype.getChildCount = function () {\n        return this.ele.children.length;\n    };\n    ReactWrapper.prototype.getNativeElement = function () {\n        var _this = this;\n        var nativeElement = null;\n        this.withRenderer(function (ren) {\n            if (_this.ele == null) {\n                nativeElement = null;\n                return;\n            }\n            if (_this.ele.getNativeElement == undefined) {\n                nativeElement = _this.ele;\n                return nativeElement;\n            }\n            nativeElement = (_this.ele.getNativeElement());\n        });\n        return nativeElement;\n    };\n    ReactWrapper.prototype.height = function () {\n        var ret = this.getStyleProperty(\"height\");\n        if (ret == null) {\n            //todo: some voodoo here.\n            return 500;\n        }\n        var val = parseFloat(ret.replace(\"px\", \"\"));\n        if (isNaN(val)) {\n            return 0;\n        }\n        return val;\n    };\n    ReactWrapper.prototype.hide = function () {\n        this.setStyleProperty(\"display\", \"none\");\n        return this;\n    };\n    ReactWrapper.prototype.listen = function (eventName, handler) {\n        var retVal = null;\n        //this.ngZone.runOutsideAngular(() => {\n        var $self = this;\n        var a = function (e) {\n            var inner = {};\n            //TODO: normalize here?\n            inner.originalEvent = e;\n            inner.altKey = e.altKey;\n            inner.button = e.button;\n            inner.ctrlKey = e.ctrlKey;\n            inner.offsetX = e.offsetX;\n            inner.offsetY = e.offsetY;\n            inner.pageX = e.pageX;\n            inner.pageY = e.pageY;\n            if (e.touches && e.touches.length > 0) {\n                inner.pageX = e.touches[0].pageX;\n                inner.pageY = e.touches[0].pageY;\n            }\n            inner.shiftKey = e.shiftKey;\n            inner.which = e.which;\n            inner.preventDefault = function () {\n                e.preventDefault();\n            };\n            inner.stopPropagation = function () {\n                e.stopPropagation();\n            };\n            //console.log(e);\n            handler(inner);\n        };\n        var ret = this.renderer.listen(this.ele, eventName, a);\n        var self = this;\n        retVal = function () {\n            var ind = self._toUnbind.indexOf(retVal);\n            if (ind >= 0) {\n                self._toUnbind.splice(ind, 1);\n            }\n            ret();\n            a = null;\n        };\n        this._toUnbind.push(retVal);\n        //});\n        return retVal;\n    };\n    ReactWrapper.prototype.getOffsetHelper = function (ele) {\n        var clientRect = ele.getBoundingClientRect();\n        return {\n            top: clientRect.top + window.pageYOffset,\n            left: clientRect.left + window.pageXOffset\n        };\n    };\n    ReactWrapper.prototype.getOffset = function () {\n        return this.getOffsetHelper(this.getNativeElement());\n    };\n    ReactWrapper.prototype.setOffset = function (x, y) {\n        var par = this.getNativeElement().offsetParent || this.getNativeElement().parentElement;\n        var parentOffset = this.getOffsetHelper(par);\n        return this.setRawPosition(x - parentOffset.left, y - parentOffset.top);\n        //return this;\n    };\n    ReactWrapper.prototype.outerHeight = function () {\n        return this.getProperty(\"offsetHeight\");\n    };\n    ReactWrapper.prototype.outerHeightWithMargin = function () {\n        var height = this.outerHeight();\n        height += parseInt(this.getStyleProperty(\"marginTop\"));\n        height += parseInt(this.getStyleProperty(\"marginBottom\"));\n        return height;\n    };\n    ReactWrapper.prototype.outerWidth = function () {\n        return this.getProperty(\"offsetWidth\");\n    };\n    ReactWrapper.prototype.outerWidthWithMargin = function () {\n        var width = this.outerWidth();\n        width += parseInt(this.getStyleProperty(\"marginLeft\"));\n        width += parseInt(this.getStyleProperty(\"marginRight\"));\n        return width;\n    };\n    ReactWrapper.prototype.getProperty = function (propertyName) {\n        var native = this.getNativeElement();\n        return native[propertyName];\n    };\n    ReactWrapper.prototype.setProperty = function (propertyName, value) {\n        var _this = this;\n        this.withRenderer(function (ren) {\n            _this.ele[propertyName] = value;\n        });\n        return this;\n    };\n    ReactWrapper.prototype.remove = function () {\n        var _this = this;\n        this.withRenderer(function (ren) {\n            var ele = _this.getNativeElement();\n            if (ele.parentElement != null) {\n                _this.ele.parentElement.removeChild(ele);\n            }\n            //ren.detachView([this.getNativeElement()]);\n        });\n        return this;\n    };\n    ReactWrapper.prototype.removeChild = function (child) {\n        var _this = this;\n        this.withRenderer(function (ren) {\n            _this.ele.removeChild(child.getNativeElement());\n            //ren.detachView([child.getNativeElement()]);\n        });\n        return this;\n    };\n    ReactWrapper.prototype.removeChildren = function () {\n        for (var i = this.getChildCount() - 1; i >= 0; i--) {\n            this.removeChild(this.getChildAt(i));\n        }\n        return this;\n    };\n    ReactWrapper.prototype.removeClass = function (className) {\n        var _this = this;\n        if (className == null || className.length == 0) {\n            return this;\n        }\n        this.withRenderer(function (ren) {\n            className.split(\" \").forEach(function (item) { return _this.ele.classList.remove(item); });\n        });\n        return this;\n    };\n    ReactWrapper.prototype.setRawStyleProperty = function (propertyName, value) {\n        //this.withRenderer((ren) => {\n        this.ele.style[propertyName] = value;\n        //})\n        return this;\n    };\n    ReactWrapper.prototype.setRawPosition = function (x, y) {\n        this.ele.style.left = x + \"px\";\n        this.ele.style.top = y + \"px\";\n        return this;\n    };\n    ReactWrapper.prototype.setRawXPosition = function (x) {\n        this.ele.style.left = x + \"px\";\n        return this;\n    };\n    ReactWrapper.prototype.setRawYPosition = function (y) {\n        this.ele.style.top = y + \"px\";\n        return this;\n    };\n    ReactWrapper.prototype.setRawSize = function (width, height) {\n        this.ele.style.width = width + \"px\";\n        this.ele.style.height = height + \"px\";\n        return this;\n    };\n    ReactWrapper.prototype.show = function () {\n        this.setStyleProperty(\"display\", \"\");\n        return this;\n    };\n    ReactWrapper.prototype.getText = function () {\n        if (this._innerText != undefined) {\n            return this._innerText;\n        }\n        return this.getNativeElement().innerText;\n    };\n    ReactWrapper.prototype.setText = function (value) {\n        var _this = this;\n        this._innerText = value;\n        this.withRenderer(function (ren) {\n            //workaround warning:\n            _this.getNativeElement().innerText = value;\n            //ren.setText(this.ele, value);\n        });\n        return this;\n    };\n    ReactWrapper.prototype.setRawText = function (value) {\n        this._innerText = value;\n        this.ele.textContent = value;\n        return this;\n    };\n    ReactWrapper.prototype.unlistenAll = function () {\n        var toUnbind = [];\n        for (var i = 0; i < this._toUnbind.length; i++) {\n            toUnbind.push(this._toUnbind[i]);\n        }\n        for (var i = 0; i < toUnbind.length; i++) {\n            toUnbind[i]();\n        }\n        this._toUnbind.length = 0;\n        return this;\n    };\n    ReactWrapper.prototype.width = function () {\n        var ret = this.getStyleProperty(\"width\");\n        if (ret == null) {\n            //todo: some voodoo here.\n            return 500;\n        }\n        var val = parseFloat(ret.replace(\"px\", \"\"));\n        if (isNaN(val)) {\n            return 0;\n        }\n        return val;\n    };\n    ReactWrapper.prototype.parent = function () {\n        return this.ele == null || this.ele.parentElement == null ? null :\n            new ReactWrapper(this.ele.parentElement, this.renderer);\n    };\n    ReactWrapper.prototype.querySelectorAll = function (selector) {\n        var elements = this.ele.querySelectorAll(selector);\n        var result = [];\n        for (var ii = 0; ii < elements.length; ii++) {\n            result.push(new ReactWrapper(elements[ii], this.renderer));\n        }\n        return result;\n    };\n    return ReactWrapper;\n}());\nexport { ReactWrapper };\nvar ReactCssHelper = /** @class */ /*@__PURE__*/ (function () {\n    function ReactCssHelper(renderer, document) {\n        this.renderer = renderer;\n        this.document = document;\n    }\n    ReactCssHelper.prototype.getDiscoveryElement = function (container) {\n        //console.log(container);\n        var ele = this.renderer.createElement(\"fakediscoveryelement\");\n        var wrapper = new ReactWrapper(ele, this.renderer);\n        wrapper.setStyleProperty(\"box-sizing\", \"content-box\");\n        return wrapper;\n    };\n    ReactCssHelper.prototype.getPropertyValue = function (discoveryElement, className, propertyName) {\n        //console.log(\"fetching: \" + className + \", prop: \" + propertyName);\n        var ret = CssHelper.getPropertyValue1(discoveryElement, className, propertyName);\n        //console.log(\"for: \" + className + \", prop: \" + propertyName + \" value: \" + ret);\n        return ret;\n    };\n    ReactCssHelper.prototype.getValuesForClassCollection = function (discoveryElement, classPrefix, propertyNames) {\n        var prop = new List$1(String_$type, 0);\n        for (var i = 0; i < propertyNames.length; i++) {\n            prop.add(propertyNames[i]);\n        }\n        var ret = CssHelper.getValuesForClassCollection(discoveryElement, classPrefix, prop);\n        var retVal = new Array(ret.count);\n        for (var i1 = 0; i1 < ret.count; i1++) {\n            retVal[i1] = new Array(ret._inner[i1].count);\n            for (var j = 0; j < ret._inner[i1].count; j++) {\n                retVal[i1][j] = ret._inner[i1]._inner[j];\n            }\n        }\n        return retVal;\n    };\n    return ReactCssHelper;\n}());\nvar PortalManager = /** @class */ /*@__PURE__*/ (function () {\n    function PortalManager(id, requestRender) {\n        this.disableContentPortal = false;\n        this._portals = [];\n        this._portalsMap = new Map();\n        this._id = null;\n        this._currId = 0;\n        this._requestRender = requestRender;\n        this._onPortalRef = this._onPortalRef.bind(this);\n        this._id = id;\n    }\n    PortalManager.prototype.onRender = function (children) {\n        if (this._portals && this._portals.length > 0) {\n            //children = React.Children.toArray(this.props.children);\n            for (var i = 0; i < this._portals.length; i++) {\n                var p = this._portals[i];\n                if (p.isContentPortal && !this.disableContentPortal) {\n                    var mine = children.slice(0);\n                    children.length = 0;\n                    var n = p._createPortal(mine);\n                    p._nativePortal = n;\n                }\n                else {\n                    var n = p._createPortal(null);\n                    p._nativePortal = n;\n                }\n                children.push(p._nativePortal);\n            }\n        }\n    };\n    PortalManager.prototype.getId = function () {\n        return this._id + \"__\" + (this._currId++).toString();\n    };\n    PortalManager.prototype.getPortal = function (hostElement, elementTag, portalCallback, isContentPortal) {\n        var portal = new ReactDomPortal(this, hostElement, elementTag, portalCallback, this.getId(), this._onPortalRef, isContentPortal);\n        this._portals.push(portal);\n        this._portalsMap.set(portal._portalId, portal);\n        this._requestRender();\n    };\n    PortalManager.prototype._onPortalRef = function (ele) {\n        if (ele != null) {\n            var key = ele.props.id;\n            if (this._portalsMap.has(key)) {\n                var p = this._portalsMap.get(key);\n                p._onComponentProvided(ele);\n            }\n        }\n    };\n    PortalManager.prototype._destroy = function (portal) {\n        var ind = this._portals.indexOf(portal);\n        this._portalsMap.delete(portal._portalId);\n        this._portals.splice(ind, 1);\n        this._requestRender();\n    };\n    return PortalManager;\n}());\nexport { PortalManager };\nvar ReactDomPortal = /** @class */ /*@__PURE__*/ (function () {\n    function ReactDomPortal(portalManager, hostElement, elementTag, portalCallback, portalId, portalRef, isContentPortal) {\n        this._portalRef = null;\n        this.portalContainer = hostElement;\n        this._elementTag = elementTag;\n        this._portalCallback = portalCallback;\n        this._portalId = portalId;\n        this.isContentPortal = isContentPortal;\n        this._portalRef = portalRef;\n        this._owner = portalManager;\n    }\n    ReactDomPortal.prototype.destroy = function () {\n        this._owner._destroy(this);\n    };\n    ReactDomPortal.prototype._onComponentProvided = function (ele) {\n        var oldValue = this.componentRef;\n        this.componentRef = ele;\n        if (oldValue !== this.componentRef) {\n            this._portalCallback(this);\n        }\n    };\n    ReactDomPortal.prototype.toPascal = function (name) {\n        var val = fromSpinal(name);\n        return val.substr(0, 1).toUpperCase() + val.substr(1);\n    };\n    ReactDomPortal.prototype.createElementFromTag = function (elementTag, portalId, portalRef, children) {\n        if (elementTag.indexOf(\"-\") >= 0) {\n            elementTag = this.toPascal(elementTag);\n        }\n        var name = \"Igr\" + elementTag;\n        var ele = TypeRegistrar.get(name);\n        var rEle = React.createElement(ele, {\n            ref: portalRef,\n            key: portalId,\n            id: portalId,\n            children: children\n        });\n        return rEle;\n    };\n    ReactDomPortal.prototype._createPortal = function (children) {\n        var reactEle = this.createElementFromTag(this._elementTag, this._portalId, this._portalRef, children);\n        this._nativePortal = ReactDOM.createPortal(reactEle, this.portalContainer.getNativeElement(), this._portalId);\n        return this._nativePortal;\n    };\n    return ReactDomPortal;\n}());\n//# sourceMappingURL=react-renderer.js.map\n"]},"metadata":{},"sourceType":"module"}