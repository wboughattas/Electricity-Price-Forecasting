{"ast":null,"code":"/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, typeGetValue, markType } from \"./type\";\nimport { TileWorkSettings } from \"./TileWorkSettings\";\nimport { Color } from \"./Color\";\nimport { HeatTileGeneratorWorker } from \"./HeatTileGeneratorWorker\";\nimport { HeatTileScaler } from \"./HeatTileScaler\";\nimport { Rect } from \"./Rect\";\nimport { ITileWorkCompletedSink_$type } from \"./ITileWorkCompletedSink\";\n/**\r\n * @hidden\r\n */\n\nvar HeatTileGeneratorWebWorker =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(HeatTileGeneratorWebWorker, _super);\n\n  function HeatTileGeneratorWebWorker() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(HeatTileGeneratorWebWorker, \"postmessage\", {\n    get: function () {\n      return HeatTileGeneratorWebWorker._postmessage;\n    },\n    set: function (a) {\n      HeatTileGeneratorWebWorker._postmessage = a;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  HeatTileGeneratorWebWorker.onmessage = function (args_) {\n    var data_ = args_.data;\n    var a = data_.cancelTile;\n    var b = data_.z;\n    var c = data_.y;\n    var d = data_.x;\n\n    if (a) {\n      for (var i_ = 0; i_ < HeatTileGeneratorWebWorker.b.length; i_++) {\n        var e = HeatTileGeneratorWebWorker.b[i_];\n\n        if (e.g.testRun) {\n          continue;\n        }\n\n        if (e.g.z == b && e.g.x == d && e.g.y == c) {\n          var workers_ = HeatTileGeneratorWebWorker.b;\n          workers_.splice(i_, 1);\n          i_--;\n        }\n      }\n    }\n\n    var f = new TileWorkSettings();\n    var g = data_;\n\n    if (!g[\"messageId\"]) {\n      return;\n    }\n\n    if (g[\"isNewData\"]) {\n      var yValues_ = g[\"yValues\"];\n      var xValues_ = g[\"xValues\"];\n      var values_ = g[\"values\"];\n      HeatTileGeneratorWebWorker._yValues = new Float64Array(yValues_);\n      HeatTileGeneratorWebWorker._xValues = new Float64Array(xValues_);\n      HeatTileGeneratorWebWorker._values = new Float64Array(values_);\n    }\n\n    var h = g[\"scaleColors\"];\n    var i = new Array(h.length);\n\n    for (var j = 0; j < h.length; j++) {\n      i[j] = Color.u(typeGetValue(h[j][\"a\"]), typeGetValue(h[j][\"r\"]), typeGetValue(h[j][\"g\"]), typeGetValue(h[j][\"b\"]));\n    }\n\n    f.scaler = HeatTileGeneratorWebWorker.e;\n    f.blurRadius = g[\"blurRadius\"];\n    f.maxBlurRadius = g[\"maxBlurRadius\"];\n    f.useBlurRadiusAdjustedForZoom = g[\"useBlurRadiusAdjustedForZoom\"];\n    f.minimumColor = Color.u(typeGetValue(g[\"minimumColor\"][\"a\"]), typeGetValue(g[\"minimumColor\"][\"r\"]), typeGetValue(g[\"minimumColor\"][\"g\"]), typeGetValue(g[\"minimumColor\"][\"b\"]));\n    f.maximumColor = Color.u(typeGetValue(g[\"maximumColor\"][\"a\"]), typeGetValue(g[\"maximumColor\"][\"r\"]), typeGetValue(g[\"maximumColor\"][\"g\"]), typeGetValue(g[\"maximumColor\"][\"b\"]));\n    f.tileViewport = new Rect(0, g[\"tileViewport\"][\"left\"], g[\"tileViewport\"][\"top\"], g[\"tileViewport\"][\"width\"], g[\"tileViewport\"][\"height\"]);\n    f.yValues = HeatTileGeneratorWebWorker._yValues;\n    f.xValues = HeatTileGeneratorWebWorker._xValues;\n    f.values = HeatTileGeneratorWebWorker._values;\n    f.minimumVisibleLatitude = g[\"minimumVisibleLatitude\"];\n    f.minimumVisibleLongitude = g[\"minimumVisibleLongitude\"];\n    f.maximumVisibleLatitude = g[\"maximumVisibleLatitude\"];\n    f.maximumVisibleLongitude = g[\"maximumVisibleLongitude\"];\n    f.z = typeGetValue(g[\"z\"]);\n    f.x = typeGetValue(g[\"x\"]);\n    f.y = typeGetValue(g[\"y\"]);\n    f.window = new Rect(0, g[\"window\"][\"left\"], g[\"window\"][\"top\"], g[\"window\"][\"width\"], g[\"window\"][\"height\"]);\n    f.testRun = g[\"testRun\"];\n    f.globalMinimum = g[\"globalMinimum\"];\n    f.globalMaximum = g[\"globalMaximum\"];\n    f.useGlobalMinMax = g[\"useGlobalMinMax\"];\n    f.minimumValue = g[\"minimumValue\"];\n    f.maximumValue = g[\"maximumValue\"];\n    f.scaleColorOffsets = g[\"scaleColorOffsets\"];\n    f.scaleColors = i;\n    f.useLogarithmicScale = g[\"useLogarithmicScale\"];\n    f.logarithmBase = g[\"logarithmBase\"];\n    var k = new HeatTileGeneratorWorker(f);\n    k.u = typeGetValue(g[\"messageId\"]);\n    k.h = true;\n    k.completedSink = new CompletedSinkImpl(k);\n    var workersl_ = HeatTileGeneratorWebWorker.b;\n    var worker_ = k;\n    workersl_.push(worker_);\n  };\n\n  HeatTileGeneratorWebWorker.start = function () {\n    var workers_ = HeatTileGeneratorWebWorker.b;\n    setInterval(function () {\n      if (workers_.length > 0) {\n        var worker = workers_.shift();\n        worker.doWork();\n        worker.completedSink = null;\n      }\n    }, 16);\n    ;\n  };\n\n  HeatTileGeneratorWebWorker.$t = markType(HeatTileGeneratorWebWorker, 'HeatTileGeneratorWebWorker');\n  HeatTileGeneratorWebWorker.e = new HeatTileScaler();\n  HeatTileGeneratorWebWorker.b = [];\n  HeatTileGeneratorWebWorker._postmessage = null;\n  HeatTileGeneratorWebWorker._yValues = null;\n  HeatTileGeneratorWebWorker._xValues = null;\n  HeatTileGeneratorWebWorker._values = null;\n  return HeatTileGeneratorWebWorker;\n}(Base);\n\nexport { HeatTileGeneratorWebWorker };\n/**\r\n * @hidden\r\n */\n\nvar CompletedSinkImpl =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(CompletedSinkImpl, _super);\n\n  function CompletedSinkImpl(a) {\n    var _this = _super.call(this) || this;\n\n    _this.a = null;\n    _this.a = a;\n    return _this;\n  }\n\n  CompletedSinkImpl.prototype.onCompleted = function (a) {\n    var b = a;\n    var c = {};\n    var imageData_ = b.imageData;\n    c[\"messageId\"] = this.a.u;\n    c[\"imageData\"] = b.imageData == null ? null : new Uint8ClampedArray(imageData_)[\"buffer\"];\n    c[\"z\"] = b.z;\n    c[\"x\"] = b.x;\n    c[\"y\"] = b.y;\n    c[\"url\"] = b.url;\n    c[\"globalMinimumValue\"] = b.globalMinimumValue;\n    c[\"globalMaximumValue\"] = b.globalMaximumValue;\n    c[\"globalMaximumValueLongitude\"] = b.globalMaximumValueLongitude;\n    c[\"globalMaximumValueLatitude\"] = b.globalMaximumValueLatitude;\n    c[\"globalMinimumValueLongitude\"] = b.globalMinimumValueLongitude;\n    c[\"globalMinimumValueLatitude\"] = b.globalMinimumValueLatitude;\n\n    if (this.a.h && c[\"imageData\"] != null) {\n      HeatTileGeneratorWebWorker.postmessage(c, [c[\"imageData\"]]);\n    } else {\n      HeatTileGeneratorWebWorker.postmessage(c);\n    }\n  };\n\n  CompletedSinkImpl.$t = markType(CompletedSinkImpl, 'CompletedSinkImpl', Base.$, [ITileWorkCompletedSink_$type]);\n  return CompletedSinkImpl;\n}(Base);\n\nexport { CompletedSinkImpl };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/HeatTileGeneratorWebWorker_combined.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\r\nimport * as tslib_1 from \"tslib\";\r\nimport { Base, typeGetValue, markType } from \"./type\";\r\nimport { TileWorkSettings } from \"./TileWorkSettings\";\r\nimport { Color } from \"./Color\";\r\nimport { HeatTileGeneratorWorker } from \"./HeatTileGeneratorWorker\";\r\nimport { HeatTileScaler } from \"./HeatTileScaler\";\r\nimport { Rect } from \"./Rect\";\r\nimport { ITileWorkCompletedSink_$type } from \"./ITileWorkCompletedSink\";\r\n/**\r\n * @hidden\r\n */\r\nvar HeatTileGeneratorWebWorker = /** @class */ /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(HeatTileGeneratorWebWorker, _super);\r\n    function HeatTileGeneratorWebWorker() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(HeatTileGeneratorWebWorker, \"postmessage\", {\r\n        get: function () {\r\n            return HeatTileGeneratorWebWorker._postmessage;\r\n        },\r\n        set: function (a) {\r\n            HeatTileGeneratorWebWorker._postmessage = a;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    HeatTileGeneratorWebWorker.onmessage = function (args_) {\r\n        var data_ = args_.data;\r\n        var a = (data_.cancelTile);\r\n        var b = (data_.z);\r\n        var c = (data_.y);\r\n        var d = (data_.x);\r\n        if (a) {\r\n            for (var i_ = 0; i_ < HeatTileGeneratorWebWorker.b.length; i_++) {\r\n                var e = HeatTileGeneratorWebWorker.b[i_];\r\n                if (e.g.testRun) {\r\n                    continue;\r\n                }\r\n                if (e.g.z == b && e.g.x == d && e.g.y == c) {\r\n                    var workers_ = HeatTileGeneratorWebWorker.b;\r\n                    workers_.splice(i_, 1);\r\n                    i_--;\r\n                }\r\n            }\r\n        }\r\n        var f = new TileWorkSettings();\r\n        var g = data_;\r\n        if (!g[\"messageId\"]) {\r\n            return;\r\n        }\r\n        if (g[\"isNewData\"]) {\r\n            var yValues_ = g[\"yValues\"];\r\n            var xValues_ = g[\"xValues\"];\r\n            var values_ = g[\"values\"];\r\n            HeatTileGeneratorWebWorker._yValues = (new Float64Array(yValues_));\r\n            HeatTileGeneratorWebWorker._xValues = (new Float64Array(xValues_));\r\n            HeatTileGeneratorWebWorker._values = (new Float64Array(values_));\r\n        }\r\n        var h = g[\"scaleColors\"];\r\n        var i = new Array(h.length);\r\n        for (var j = 0; j < h.length; j++) {\r\n            i[j] = Color.u(typeGetValue(h[j][\"a\"]), typeGetValue(h[j][\"r\"]), typeGetValue(h[j][\"g\"]), typeGetValue(h[j][\"b\"]));\r\n        }\r\n        f.scaler = HeatTileGeneratorWebWorker.e;\r\n        f.blurRadius = g[\"blurRadius\"];\r\n        f.maxBlurRadius = g[\"maxBlurRadius\"];\r\n        f.useBlurRadiusAdjustedForZoom = (g[\"useBlurRadiusAdjustedForZoom\"]);\r\n        f.minimumColor = Color.u(typeGetValue(g[\"minimumColor\"][\"a\"]), typeGetValue(g[\"minimumColor\"][\"r\"]), typeGetValue(g[\"minimumColor\"][\"g\"]), typeGetValue(g[\"minimumColor\"][\"b\"]));\r\n        f.maximumColor = Color.u(typeGetValue(g[\"maximumColor\"][\"a\"]), typeGetValue(g[\"maximumColor\"][\"r\"]), typeGetValue(g[\"maximumColor\"][\"g\"]), typeGetValue(g[\"maximumColor\"][\"b\"]));\r\n        f.tileViewport = new Rect(0, g[\"tileViewport\"][\"left\"], g[\"tileViewport\"][\"top\"], g[\"tileViewport\"][\"width\"], g[\"tileViewport\"][\"height\"]);\r\n        f.yValues = HeatTileGeneratorWebWorker._yValues;\r\n        f.xValues = HeatTileGeneratorWebWorker._xValues;\r\n        f.values = HeatTileGeneratorWebWorker._values;\r\n        f.minimumVisibleLatitude = g[\"minimumVisibleLatitude\"];\r\n        f.minimumVisibleLongitude = g[\"minimumVisibleLongitude\"];\r\n        f.maximumVisibleLatitude = g[\"maximumVisibleLatitude\"];\r\n        f.maximumVisibleLongitude = g[\"maximumVisibleLongitude\"];\r\n        f.z = typeGetValue(g[\"z\"]);\r\n        f.x = typeGetValue(g[\"x\"]);\r\n        f.y = typeGetValue(g[\"y\"]);\r\n        f.window = new Rect(0, g[\"window\"][\"left\"], g[\"window\"][\"top\"], g[\"window\"][\"width\"], g[\"window\"][\"height\"]);\r\n        f.testRun = g[\"testRun\"];\r\n        f.globalMinimum = g[\"globalMinimum\"];\r\n        f.globalMaximum = g[\"globalMaximum\"];\r\n        f.useGlobalMinMax = g[\"useGlobalMinMax\"];\r\n        f.minimumValue = g[\"minimumValue\"];\r\n        f.maximumValue = g[\"maximumValue\"];\r\n        f.scaleColorOffsets = g[\"scaleColorOffsets\"];\r\n        f.scaleColors = i;\r\n        f.useLogarithmicScale = g[\"useLogarithmicScale\"];\r\n        f.logarithmBase = g[\"logarithmBase\"];\r\n        var k = new HeatTileGeneratorWorker(f);\r\n        k.u = typeGetValue(g[\"messageId\"]);\r\n        k.h = true;\r\n        k.completedSink = new CompletedSinkImpl(k);\r\n        var workersl_ = HeatTileGeneratorWebWorker.b;\r\n        var worker_ = k;\r\n        workersl_.push(worker_);\r\n    };\r\n    HeatTileGeneratorWebWorker.start = function () {\r\n        var workers_ = HeatTileGeneratorWebWorker.b;\r\n        setInterval(function () {\r\n            if (workers_.length > 0) {\r\n                var worker = workers_.shift();\r\n                worker.doWork();\r\n                worker.completedSink = null;\r\n            }\r\n        }, 16);\r\n        ;\r\n    };\r\n    HeatTileGeneratorWebWorker.$t = markType(HeatTileGeneratorWebWorker, 'HeatTileGeneratorWebWorker');\r\n    HeatTileGeneratorWebWorker.e = new HeatTileScaler();\r\n    HeatTileGeneratorWebWorker.b = [];\r\n    HeatTileGeneratorWebWorker._postmessage = null;\r\n    HeatTileGeneratorWebWorker._yValues = null;\r\n    HeatTileGeneratorWebWorker._xValues = null;\r\n    HeatTileGeneratorWebWorker._values = null;\r\n    return HeatTileGeneratorWebWorker;\r\n}(Base));\r\nexport { HeatTileGeneratorWebWorker };\r\n/**\r\n * @hidden\r\n */\r\nvar CompletedSinkImpl = /** @class */ /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(CompletedSinkImpl, _super);\r\n    function CompletedSinkImpl(a) {\r\n        var _this = _super.call(this) || this;\r\n        _this.a = null;\r\n        _this.a = a;\r\n        return _this;\r\n    }\r\n    CompletedSinkImpl.prototype.onCompleted = function (a) {\r\n        var b = a;\r\n        var c = {};\r\n        var imageData_ = b.imageData;\r\n        c[\"messageId\"] = this.a.u;\r\n        c[\"imageData\"] = (b.imageData == null ? null : (new Uint8ClampedArray(imageData_))[\"buffer\"]);\r\n        c[\"z\"] = b.z;\r\n        c[\"x\"] = b.x;\r\n        c[\"y\"] = b.y;\r\n        c[\"url\"] = b.url;\r\n        c[\"globalMinimumValue\"] = b.globalMinimumValue;\r\n        c[\"globalMaximumValue\"] = b.globalMaximumValue;\r\n        c[\"globalMaximumValueLongitude\"] = b.globalMaximumValueLongitude;\r\n        c[\"globalMaximumValueLatitude\"] = b.globalMaximumValueLatitude;\r\n        c[\"globalMinimumValueLongitude\"] = b.globalMinimumValueLongitude;\r\n        c[\"globalMinimumValueLatitude\"] = b.globalMinimumValueLatitude;\r\n        if (this.a.h && c[\"imageData\"] != null) {\r\n            HeatTileGeneratorWebWorker.postmessage(c, [c[\"imageData\"]]);\r\n        }\r\n        else {\r\n            HeatTileGeneratorWebWorker.postmessage(c);\r\n        }\r\n    };\r\n    CompletedSinkImpl.$t = markType(CompletedSinkImpl, 'CompletedSinkImpl', Base.$, [ITileWorkCompletedSink_$type]);\r\n    return CompletedSinkImpl;\r\n}(Base));\r\nexport { CompletedSinkImpl };\r\n//# sourceMappingURL=HeatTileGeneratorWebWorker_combined.js.map\r\n"]},"metadata":{},"sourceType":"module"}