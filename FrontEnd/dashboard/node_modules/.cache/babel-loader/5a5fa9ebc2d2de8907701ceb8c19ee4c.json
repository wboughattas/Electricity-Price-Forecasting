{"ast":null,"code":"/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\nimport * as tslib_1 from \"tslib\";\nimport { Base, Boolean_$type, typeCast, String_$type, markType } from \"./type\";\nimport { Brush } from \"./Brush\";\nimport { LinearGradientBrush } from \"./LinearGradientBrush\";\nimport { GradientStop } from \"./GradientStop\";\nimport { Color } from \"./Color\";\nimport { ColorUtil } from \"./ColorUtil\";\nimport { Tuple$2 } from \"./Tuple$2\";\nimport { BrushCollection } from \"./BrushCollection\";\nimport { List$1 } from \"./List$1\";\nimport { CssGradientUtil } from \"./CssGradientUtil\";\nimport { truncate } from \"./number\";\n/**\r\n * @hidden\r\n */\n\nvar BrushUtil =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  tslib_1.__extends(BrushUtil, _super);\n\n  function BrushUtil() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BrushUtil.l = function (a, b) {\n    if (a == null) {\n      return a;\n    }\n\n    if (a.isGradient) {\n      var c = a.clone();\n\n      for (var d = 0; d < c.gradientStops.length; d++) {\n        var e = c.gradientStops[d];\n        e.color = ColorUtil.o(e.color, b);\n      }\n\n      return c;\n    } else {\n      var f_1 = ColorUtil.o(a.color, b);\n      return function () {\n        var $ret = new Brush();\n        $ret.color = f_1;\n        return $ret;\n      }();\n    }\n  };\n\n  BrushUtil.d = function (a) {\n    var b = Color.u(0, 0, 0, 0);\n\n    if (a == null) {\n      return new Tuple$2(Boolean_$type, Color.$, true, b);\n    }\n\n    if (typeCast(LinearGradientBrush.$, a) !== null) {\n      if (a.gradientStops == null || a.gradientStops.length < 1) {\n        return new Tuple$2(Boolean_$type, Color.$, false, b);\n      }\n\n      b = a.gradientStops[0].color;\n    } else {\n      b = a.color;\n    }\n\n    return new Tuple$2(Boolean_$type, Color.$, true, b);\n  };\n\n  BrushUtil.i = function (a, b, c) {\n    var d = BrushUtil.d(a);\n    var e = new Color();\n\n    if (!d.c) {\n      return b;\n    } else {\n      e = d.d;\n    }\n\n    var f = new Color();\n    var g = new Color();\n    var h = BrushUtil.d(b);\n\n    if (!h.c) {\n      return b;\n    }\n\n    g = h.d;\n    var i = BrushUtil.d(c);\n\n    if (!i.c) {\n      return b;\n    }\n\n    f = i.d;\n    var j = ColorUtil.a(e);\n    var k = ColorUtil.a(f);\n    var l = ColorUtil.a(g);\n    var m = (j[3] + 0.05) / (l[3] + 0.05);\n    var n = (k[3] + 0.05) / (j[3] + 0.05);\n\n    if (m > n) {\n      return b;\n    }\n\n    return c;\n  };\n\n  BrushUtil.h = function (a, b, c) {\n    var d = new Color();\n\n    if (typeCast(LinearGradientBrush.$, a) !== null) {\n      if (a.gradientStops == null || a.gradientStops.length < 1) {\n        var e = new Brush();\n        e.color = b;\n        return e;\n      }\n\n      d = a.gradientStops[0].color;\n    } else {\n      d = a.color;\n    }\n\n    var f = ColorUtil.a(d);\n    var g = ColorUtil.a(c);\n    var h = ColorUtil.a(b);\n    var i = (f[3] + 0.05) / (h[3] + 0.05);\n    var j = (g[3] + 0.05) / (f[3] + 0.05);\n\n    if (i > j) {\n      var k = new Brush();\n      k.color = b;\n    }\n\n    var l = new Brush();\n    l.color = c;\n    return l;\n  };\n\n  BrushUtil.n = function (a, b) {\n    if (a == null) {\n      return a;\n    }\n\n    if (a.isGradient) {\n      var c = a.clone();\n\n      for (var d = 0; d < c.gradientStops.length; d++) {\n        var e = c.gradientStops[d];\n        e.color = Color.u(truncate(Math.round(e.color.l * b)), e.color.o, e.color.n, e.color.m);\n      }\n\n      return c;\n    } else {\n      var f_2 = Color.u(truncate(Math.round(a.color.l * b)), a.color.o, a.color.n, a.color.m);\n      return function () {\n        var $ret = new Brush();\n        $ret.color = f_2;\n        return $ret;\n      }();\n    }\n  };\n\n  BrushUtil.k = function (a, b, c, d) {\n    var e = new Brush();\n\n    if (a == null && c == null) {\n      e._fill = \"transparent\";\n      return e;\n    }\n\n    var f = null,\n        g = null;\n    var h = null,\n        i = null;\n\n    if (a == null) {\n      var j_1 = c.isGradient ? function () {\n        var $ret = new Color();\n        $ret.l = 0;\n        $ret.o = 255;\n        $ret.n = 255;\n        $ret.m = 255;\n        return $ret;\n      }() : function () {\n        var $ret = new Color();\n        $ret.l = 0;\n        $ret.o = c.color.o;\n        $ret.n = c.color.n;\n        $ret.m = c.color.m;\n        return $ret;\n      }();\n\n      f = function () {\n        var $ret = new Brush();\n        $ret.color = j_1;\n        return $ret;\n      }();\n    } else {\n      if (a.isGradient) {\n        h = a;\n      } else {\n        f = a;\n      }\n    }\n\n    if (c == null) {\n      var k_1 = a.isGradient ? function () {\n        var $ret = new Color();\n        $ret.l = 0;\n        $ret.o = 255;\n        $ret.n = 255;\n        $ret.m = 255;\n        return $ret;\n      }() : function () {\n        var $ret = new Color();\n        $ret.l = 0;\n        $ret.o = a.color.o;\n        $ret.n = a.color.n;\n        $ret.m = a.color.m;\n        return $ret;\n      }();\n\n      g = function () {\n        var $ret = new Brush();\n        $ret.color = k_1;\n        return $ret;\n      }();\n    } else {\n      if (c.isGradient) {\n        i = c;\n      } else {\n        g = c;\n      }\n    }\n\n    if (f != null && g != null) {\n      return BrushUtil.p(f, b, g, d);\n    }\n\n    if (f != null && i != null) {\n      return BrushUtil.o(f, b, i, d);\n    }\n\n    if (h != null && g != null) {\n      return BrushUtil.o(g, 1 - b, h, d);\n    }\n\n    if (h != null && i != null) {\n      return BrushUtil.m(h, b, i, d);\n    }\n\n    return e;\n  };\n\n  BrushUtil.g = function (a, b, c, d) {\n    var e = new Brush();\n    e.color = Color.u(a, b, c, d);\n    return e;\n  };\n\n  BrushUtil.p = function (a, b, c, d) {\n    var e = new Brush();\n    e.color = ColorUtil.n(a.color, b, c.color, d);\n    return e;\n  };\n\n  BrushUtil.o = function (a, b, c, d) {\n    var e = new LinearGradientBrush();\n    e.gradientStops = BrushUtil.c(a.color, b, c.gradientStops, d);\n\n    if (c.useCustomDirection) {\n      e.useCustomDirection = true;\n      e.startX = c.startX;\n      e.startY = c.startY;\n      e.endX = c.endX;\n      e.endY = c.endY;\n    }\n\n    return e;\n  };\n\n  BrushUtil.m = function (a, b, c, d) {\n    var e = new LinearGradientBrush();\n    e.gradientStops = BrushUtil.b(a.gradientStops, b, c.gradientStops, d);\n\n    if (a.useCustomDirection || c.useCustomDirection) {\n      e.useCustomDirection = true;\n      e.startX = a.startX + b * (c.startX - a.startX);\n      e.startY = a.startY + b * (c.startY - a.startY);\n      e.endX = (1 - b) * a.endX + b * c.endX;\n      e.endY = (1 - b) * a.endY + b * c.endY;\n    }\n\n    return e;\n  };\n\n  BrushUtil.c = function (a, b, c, d) {\n    var e = new Array(c.length);\n\n    var _loop_1 = function (f) {\n      e[f] = function () {\n        var $ret = new GradientStop();\n        $ret.offset = c[f].offset;\n        $ret.color = ColorUtil.n(a, b, c[f].color, d);\n        return $ret;\n      }();\n    };\n\n    for (var f = 0; f < c.length; ++f) {\n      _loop_1(f);\n    }\n\n    return e;\n  };\n\n  BrushUtil.b = function (a, b, c, d) {\n    var e = Math.min(a.length, c.length);\n    var f = Math.max(a.length, c.length);\n    var g = new Array(f);\n    var h = 0;\n\n    for (; h < e; ++h) {\n      g[h] = function () {\n        var $ret = new GradientStop();\n        $ret.offset = (1 - b) * a[h].offset + b * c[h].offset;\n        $ret.color = ColorUtil.n(a[h].color, b, c[h].color, d);\n        return $ret;\n      }();\n    }\n\n    for (; h < a.length; ++h) {\n      g[h] = function () {\n        var $ret = new GradientStop();\n        $ret.offset = (1 - b) * a[h].offset + b * c[c.length - 1].offset;\n        $ret.color = ColorUtil.n(a[h].color, b, c[c.length - 1].color, d);\n        return $ret;\n      }();\n    }\n\n    for (; h < c.length; ++h) {\n      g[h] = function () {\n        var $ret = new GradientStop();\n        $ret.offset = (1 - b) * a[a.length - 1].offset + b * c[h].offset;\n        $ret.color = ColorUtil.n(a[a.length - 1].color, b, c[h].color, d);\n        return $ret;\n      }();\n    }\n\n    return g;\n  };\n\n  BrushUtil.a = function (a, b) {\n    var c = new Array(2);\n    b.addClass(a);\n    var d = new Brush();\n    d._fill = b.getStyleProperty(\"background-color\");\n    var e = new Brush();\n    e._fill = b.getStyleProperty(\"border-top-color\");\n    b.removeClass(a);\n    c[0] = d;\n    c[1] = e;\n    return c;\n  };\n\n  BrushUtil.e = function (palleteName_, container_, a, b, c) {\n    if (c === void 0) {\n      c = null;\n    }\n\n    a = new BrushCollection();\n    b = new BrushCollection();\n    var d;\n    var e = new List$1(String_$type, 0);\n    e.add(\"background-color\");\n    e.add(\"border-top-color\");\n    container_.startCSSQuery();\n    var f = container_.getCssDefaultValuesForClassCollection(\"ui-\" + palleteName_ + \"-palette-\", e.toArray());\n    var g = f.length;\n\n    if (g == 0) {\n      if (c == null) {\n        c = [\"#B1BFC9\", \"#50a8be\", \"#798995\", \"#fc6754\", \"#4F606C\", \"#fec33c\", \"#374650\", \"#3c6399\", \"#162C3B\", \"#91af49\"];\n      }\n\n      for (var h = 0; h < c.length - 1; h += 2) {\n        d = new Brush();\n        d._fill = c[h];\n        b.add(d);\n        d = new Brush();\n        d._fill = c[h + 1];\n        a.add(d);\n      }\n    }\n\n    for (var i = 0; i < g; i++) {\n      var j = new Brush();\n      j._fill = f[i][0];\n      var k = new Brush();\n      k._fill = f[i][1];\n      a.add(j);\n      b.add(k);\n    }\n\n    container_.endCSSQuery();\n    return {\n      p2: a,\n      p3: b\n    };\n  };\n\n  BrushUtil.f = function (a, b, c, container_, d, e, f) {\n    if (f === void 0) {\n      f = null;\n    }\n\n    d = new BrushCollection();\n    e = new BrushCollection();\n\n    if (f == null) {\n      f = [\"#B1BFC9\", \"#50a8be\", \"#798995\", \"#fc6754\", \"#4F606C\", \"#fec33c\", \"#374650\", \"#3c6399\", \"#162C3B\", \"#91af49\"];\n    }\n\n    container_.startCSSQuery();\n    var g = new List$1(String_$type, 0);\n    g.add(\"background-image\");\n    var h = container_.getCssDefaultValuesForClassCollection(a, g.toArray());\n    var i = h.length;\n    var j = container_.getCssDefaultValuesForClassCollection(b, g.toArray());\n    var k = j.length;\n\n    for (var l = 0; l < i; l++) {\n      d.add(CssGradientUtil.brushFromGradientString(h[l][0]));\n    }\n\n    for (var m = 0; m < k; m++) {\n      e.add(CssGradientUtil.brushFromGradientString(j[m][0]));\n    }\n\n    g.clear();\n    var n = 0;\n    var o = 0;\n    var p = Math.min(i, k);\n    var q = null;\n\n    if (i == 0) {\n      g.add(\"background-color\");\n    }\n\n    if (k == 0) {\n      g.add(\"border-top-color\");\n      o = i == 0 ? 1 : 0;\n    }\n\n    if (g.count > 0) {\n      q = container_.getCssDefaultValuesForClassCollection(c, g.toArray());\n      p = q.length;\n    }\n\n    if (i == 0) {\n      if (p > 0) {\n        for (var r = 0; r < p; r++) {\n          var s = new Brush();\n          s._fill = q[r][n];\n          d.add(s);\n        }\n      } else {\n        for (var t = 0; t < f.length - 1; t += 2) {\n          var u = new Brush();\n          u = new Brush();\n          u._fill = f[t + 1];\n          d.add(u);\n        }\n      }\n    }\n\n    if (k == 0) {\n      if (p > 0) {\n        for (var v = 0; v < p; v++) {\n          var w = new Brush();\n          w._fill = q[v][o];\n          e.add(w);\n        }\n      } else {\n        for (var x = 0; x < f.length - 1; x += 2) {\n          var y = new Brush();\n          y._fill = f[x];\n          e.add(y);\n        }\n      }\n    }\n\n    container_.endCSSQuery();\n    return {\n      p4: d,\n      p5: e\n    };\n  };\n\n  BrushUtil.j = function (a, b, c, container_, d) {\n    var e = null;\n    container_.startCSSQuery();\n    var f = container_.getCssDefaultPropertyValue(a, \"background-image\");\n\n    if (f != null) {\n      e = CssGradientUtil.brushFromGradientString(f);\n    }\n\n    if (e == null) {\n      e = new Brush();\n      var g = container_.getCssDefaultPropertyValue(b, c);\n      e._fill = g != null ? g : d;\n    }\n\n    container_.endCSSQuery();\n    return e;\n  };\n\n  BrushUtil.$t = markType(BrushUtil, 'BrushUtil');\n  return BrushUtil;\n}(Base);\n\nexport { BrushUtil };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/BrushUtil.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\r\nhttps://www.infragistics.com/legal/license/igultimate-la\r\nhttps://www.infragistics.com/legal/license/igultimate-eula\r\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\r\n*/\r\nimport * as tslib_1 from \"tslib\";\r\nimport { Base, Boolean_$type, typeCast, String_$type, markType } from \"./type\";\r\nimport { Brush } from \"./Brush\";\r\nimport { LinearGradientBrush } from \"./LinearGradientBrush\";\r\nimport { GradientStop } from \"./GradientStop\";\r\nimport { Color } from \"./Color\";\r\nimport { ColorUtil } from \"./ColorUtil\";\r\nimport { Tuple$2 } from \"./Tuple$2\";\r\nimport { BrushCollection } from \"./BrushCollection\";\r\nimport { List$1 } from \"./List$1\";\r\nimport { CssGradientUtil } from \"./CssGradientUtil\";\r\nimport { truncate } from \"./number\";\r\n/**\r\n * @hidden\r\n */\r\nvar BrushUtil = /** @class */ /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(BrushUtil, _super);\r\n    function BrushUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    BrushUtil.l = function (a, b) {\r\n        if (a == null) {\r\n            return a;\r\n        }\r\n        if (a.isGradient) {\r\n            var c = a.clone();\r\n            for (var d = 0; d < c.gradientStops.length; d++) {\r\n                var e = c.gradientStops[d];\r\n                e.color = ColorUtil.o(e.color, b);\r\n            }\r\n            return c;\r\n        }\r\n        else {\r\n            var f_1 = ColorUtil.o(a.color, b);\r\n            return ((function () {\r\n                var $ret = new Brush();\r\n                $ret.color = f_1;\r\n                return $ret;\r\n            })());\r\n        }\r\n    };\r\n    BrushUtil.d = function (a) {\r\n        var b = Color.u(0, 0, 0, 0);\r\n        if (a == null) {\r\n            return new Tuple$2(Boolean_$type, Color.$, true, b);\r\n        }\r\n        if (typeCast(LinearGradientBrush.$, a) !== null) {\r\n            if (a.gradientStops == null || a.gradientStops.length < 1) {\r\n                return new Tuple$2(Boolean_$type, Color.$, false, b);\r\n            }\r\n            b = a.gradientStops[0].color;\r\n        }\r\n        else {\r\n            b = a.color;\r\n        }\r\n        return new Tuple$2(Boolean_$type, Color.$, true, b);\r\n    };\r\n    BrushUtil.i = function (a, b, c) {\r\n        var d = BrushUtil.d(a);\r\n        var e = new Color();\r\n        if (!d.c) {\r\n            return b;\r\n        }\r\n        else {\r\n            e = d.d;\r\n        }\r\n        var f = new Color();\r\n        var g = new Color();\r\n        var h = BrushUtil.d(b);\r\n        if (!h.c) {\r\n            return b;\r\n        }\r\n        g = h.d;\r\n        var i = BrushUtil.d(c);\r\n        if (!i.c) {\r\n            return b;\r\n        }\r\n        f = i.d;\r\n        var j = ColorUtil.a(e);\r\n        var k = ColorUtil.a(f);\r\n        var l = ColorUtil.a(g);\r\n        var m = (j[3] + 0.05) / (l[3] + 0.05);\r\n        var n = (k[3] + 0.05) / (j[3] + 0.05);\r\n        if (m > n) {\r\n            return b;\r\n        }\r\n        return c;\r\n    };\r\n    BrushUtil.h = function (a, b, c) {\r\n        var d = new Color();\r\n        if (typeCast(LinearGradientBrush.$, a) !== null) {\r\n            if (a.gradientStops == null || a.gradientStops.length < 1) {\r\n                var e = new Brush();\r\n                e.color = b;\r\n                return e;\r\n            }\r\n            d = a.gradientStops[0].color;\r\n        }\r\n        else {\r\n            d = a.color;\r\n        }\r\n        var f = ColorUtil.a(d);\r\n        var g = ColorUtil.a(c);\r\n        var h = ColorUtil.a(b);\r\n        var i = (f[3] + 0.05) / (h[3] + 0.05);\r\n        var j = (g[3] + 0.05) / (f[3] + 0.05);\r\n        if (i > j) {\r\n            var k = new Brush();\r\n            k.color = b;\r\n        }\r\n        var l = new Brush();\r\n        l.color = c;\r\n        return l;\r\n    };\r\n    BrushUtil.n = function (a, b) {\r\n        if (a == null) {\r\n            return a;\r\n        }\r\n        if (a.isGradient) {\r\n            var c = a.clone();\r\n            for (var d = 0; d < c.gradientStops.length; d++) {\r\n                var e = c.gradientStops[d];\r\n                e.color = Color.u(truncate(Math.round(e.color.l * b)), e.color.o, e.color.n, e.color.m);\r\n            }\r\n            return c;\r\n        }\r\n        else {\r\n            var f_2 = Color.u(truncate(Math.round(a.color.l * b)), a.color.o, a.color.n, a.color.m);\r\n            return ((function () {\r\n                var $ret = new Brush();\r\n                $ret.color = f_2;\r\n                return $ret;\r\n            })());\r\n        }\r\n    };\r\n    BrushUtil.k = function (a, b, c, d) {\r\n        var e = new Brush();\r\n        if (a == null && c == null) {\r\n            e._fill = \"transparent\";\r\n            return e;\r\n        }\r\n        var f = null, g = null;\r\n        var h = null, i = null;\r\n        if (a == null) {\r\n            var j_1 = c.isGradient ? ((function () {\r\n                var $ret = new Color();\r\n                $ret.l = 0;\r\n                $ret.o = 255;\r\n                $ret.n = 255;\r\n                $ret.m = 255;\r\n                return $ret;\r\n            })()) : ((function () {\r\n                var $ret = new Color();\r\n                $ret.l = 0;\r\n                $ret.o = c.color.o;\r\n                $ret.n = c.color.n;\r\n                $ret.m = c.color.m;\r\n                return $ret;\r\n            })());\r\n            f = ((function () {\r\n                var $ret = new Brush();\r\n                $ret.color = j_1;\r\n                return $ret;\r\n            })());\r\n        }\r\n        else {\r\n            if (a.isGradient) {\r\n                h = a;\r\n            }\r\n            else {\r\n                f = a;\r\n            }\r\n        }\r\n        if (c == null) {\r\n            var k_1 = a.isGradient ? ((function () {\r\n                var $ret = new Color();\r\n                $ret.l = 0;\r\n                $ret.o = 255;\r\n                $ret.n = 255;\r\n                $ret.m = 255;\r\n                return $ret;\r\n            })()) : ((function () {\r\n                var $ret = new Color();\r\n                $ret.l = 0;\r\n                $ret.o = a.color.o;\r\n                $ret.n = a.color.n;\r\n                $ret.m = a.color.m;\r\n                return $ret;\r\n            })());\r\n            g = ((function () {\r\n                var $ret = new Brush();\r\n                $ret.color = k_1;\r\n                return $ret;\r\n            })());\r\n        }\r\n        else {\r\n            if (c.isGradient) {\r\n                i = c;\r\n            }\r\n            else {\r\n                g = c;\r\n            }\r\n        }\r\n        if (f != null && g != null) {\r\n            return BrushUtil.p(f, b, g, d);\r\n        }\r\n        if (f != null && i != null) {\r\n            return BrushUtil.o(f, b, i, d);\r\n        }\r\n        if (h != null && g != null) {\r\n            return BrushUtil.o(g, 1 - b, h, d);\r\n        }\r\n        if (h != null && i != null) {\r\n            return BrushUtil.m(h, b, i, d);\r\n        }\r\n        return e;\r\n    };\r\n    BrushUtil.g = function (a, b, c, d) {\r\n        var e = new Brush();\r\n        e.color = Color.u(a, b, c, d);\r\n        return e;\r\n    };\r\n    BrushUtil.p = function (a, b, c, d) {\r\n        var e = new Brush();\r\n        e.color = ColorUtil.n(a.color, b, c.color, d);\r\n        return e;\r\n    };\r\n    BrushUtil.o = function (a, b, c, d) {\r\n        var e = new LinearGradientBrush();\r\n        e.gradientStops = BrushUtil.c(a.color, b, c.gradientStops, d);\r\n        if (c.useCustomDirection) {\r\n            e.useCustomDirection = true;\r\n            e.startX = c.startX;\r\n            e.startY = c.startY;\r\n            e.endX = c.endX;\r\n            e.endY = c.endY;\r\n        }\r\n        return e;\r\n    };\r\n    BrushUtil.m = function (a, b, c, d) {\r\n        var e = new LinearGradientBrush();\r\n        e.gradientStops = BrushUtil.b(a.gradientStops, b, c.gradientStops, d);\r\n        if (a.useCustomDirection || c.useCustomDirection) {\r\n            e.useCustomDirection = true;\r\n            e.startX = a.startX + b * (c.startX - a.startX);\r\n            e.startY = a.startY + b * (c.startY - a.startY);\r\n            e.endX = (1 - b) * a.endX + b * c.endX;\r\n            e.endY = (1 - b) * a.endY + b * c.endY;\r\n        }\r\n        return e;\r\n    };\r\n    BrushUtil.c = function (a, b, c, d) {\r\n        var e = new Array(c.length);\r\n        var _loop_1 = function (f) {\r\n            e[f] = ((function () {\r\n                var $ret = new GradientStop();\r\n                $ret.offset = c[f].offset;\r\n                $ret.color = ColorUtil.n(a, b, c[f].color, d);\r\n                return $ret;\r\n            })());\r\n        };\r\n        for (var f = 0; f < c.length; ++f) {\r\n            _loop_1(f);\r\n        }\r\n        return e;\r\n    };\r\n    BrushUtil.b = function (a, b, c, d) {\r\n        var e = Math.min(a.length, c.length);\r\n        var f = Math.max(a.length, c.length);\r\n        var g = new Array(f);\r\n        var h = 0;\r\n        for (; h < e; ++h) {\r\n            g[h] = ((function () {\r\n                var $ret = new GradientStop();\r\n                $ret.offset = (1 - b) * a[h].offset + b * c[h].offset;\r\n                $ret.color = ColorUtil.n(a[h].color, b, c[h].color, d);\r\n                return $ret;\r\n            })());\r\n        }\r\n        for (; h < a.length; ++h) {\r\n            g[h] = ((function () {\r\n                var $ret = new GradientStop();\r\n                $ret.offset = (1 - b) * a[h].offset + b * c[c.length - 1].offset;\r\n                $ret.color = ColorUtil.n(a[h].color, b, c[c.length - 1].color, d);\r\n                return $ret;\r\n            })());\r\n        }\r\n        for (; h < c.length; ++h) {\r\n            g[h] = ((function () {\r\n                var $ret = new GradientStop();\r\n                $ret.offset = (1 - b) * a[a.length - 1].offset + b * c[h].offset;\r\n                $ret.color = ColorUtil.n(a[a.length - 1].color, b, c[h].color, d);\r\n                return $ret;\r\n            })());\r\n        }\r\n        return g;\r\n    };\r\n    BrushUtil.a = function (a, b) {\r\n        var c = new Array(2);\r\n        b.addClass(a);\r\n        var d = new Brush();\r\n        d._fill = b.getStyleProperty(\"background-color\");\r\n        var e = new Brush();\r\n        e._fill = b.getStyleProperty(\"border-top-color\");\r\n        b.removeClass(a);\r\n        c[0] = d;\r\n        c[1] = e;\r\n        return c;\r\n    };\r\n    BrushUtil.e = function (palleteName_, container_, a, b, c) {\r\n        if (c === void 0) {\r\n            c = null;\r\n        }\r\n        a = new BrushCollection();\r\n        b = new BrushCollection();\r\n        var d;\r\n        var e = new List$1(String_$type, 0);\r\n        e.add(\"background-color\");\r\n        e.add(\"border-top-color\");\r\n        container_.startCSSQuery();\r\n        var f = container_.getCssDefaultValuesForClassCollection(\"ui-\" + palleteName_ + \"-palette-\", e.toArray());\r\n        var g = f.length;\r\n        if (g == 0) {\r\n            if (c == null) {\r\n                c = [\"#B1BFC9\", \"#50a8be\", \"#798995\", \"#fc6754\", \"#4F606C\", \"#fec33c\", \"#374650\", \"#3c6399\", \"#162C3B\", \"#91af49\"];\r\n            }\r\n            for (var h = 0; h < c.length - 1; h += 2) {\r\n                d = new Brush();\r\n                d._fill = c[h];\r\n                b.add(d);\r\n                d = new Brush();\r\n                d._fill = c[h + 1];\r\n                a.add(d);\r\n            }\r\n        }\r\n        for (var i = 0; i < g; i++) {\r\n            var j = new Brush();\r\n            j._fill = f[i][0];\r\n            var k = new Brush();\r\n            k._fill = f[i][1];\r\n            a.add(j);\r\n            b.add(k);\r\n        }\r\n        container_.endCSSQuery();\r\n        return {\r\n            p2: a,\r\n            p3: b\r\n        };\r\n    };\r\n    BrushUtil.f = function (a, b, c, container_, d, e, f) {\r\n        if (f === void 0) {\r\n            f = null;\r\n        }\r\n        d = new BrushCollection();\r\n        e = new BrushCollection();\r\n        if (f == null) {\r\n            f = [\"#B1BFC9\", \"#50a8be\", \"#798995\", \"#fc6754\", \"#4F606C\", \"#fec33c\", \"#374650\", \"#3c6399\", \"#162C3B\", \"#91af49\"];\r\n        }\r\n        container_.startCSSQuery();\r\n        var g = new List$1(String_$type, 0);\r\n        g.add(\"background-image\");\r\n        var h = container_.getCssDefaultValuesForClassCollection(a, g.toArray());\r\n        var i = h.length;\r\n        var j = container_.getCssDefaultValuesForClassCollection(b, g.toArray());\r\n        var k = j.length;\r\n        for (var l = 0; l < i; l++) {\r\n            d.add(CssGradientUtil.brushFromGradientString(h[l][0]));\r\n        }\r\n        for (var m = 0; m < k; m++) {\r\n            e.add(CssGradientUtil.brushFromGradientString(j[m][0]));\r\n        }\r\n        g.clear();\r\n        var n = 0;\r\n        var o = 0;\r\n        var p = Math.min(i, k);\r\n        var q = null;\r\n        if (i == 0) {\r\n            g.add(\"background-color\");\r\n        }\r\n        if (k == 0) {\r\n            g.add(\"border-top-color\");\r\n            o = i == 0 ? 1 : 0;\r\n        }\r\n        if (g.count > 0) {\r\n            q = container_.getCssDefaultValuesForClassCollection(c, g.toArray());\r\n            p = q.length;\r\n        }\r\n        if (i == 0) {\r\n            if (p > 0) {\r\n                for (var r = 0; r < p; r++) {\r\n                    var s = new Brush();\r\n                    s._fill = q[r][n];\r\n                    d.add(s);\r\n                }\r\n            }\r\n            else {\r\n                for (var t = 0; t < f.length - 1; t += 2) {\r\n                    var u = new Brush();\r\n                    u = new Brush();\r\n                    u._fill = f[t + 1];\r\n                    d.add(u);\r\n                }\r\n            }\r\n        }\r\n        if (k == 0) {\r\n            if (p > 0) {\r\n                for (var v = 0; v < p; v++) {\r\n                    var w = new Brush();\r\n                    w._fill = q[v][o];\r\n                    e.add(w);\r\n                }\r\n            }\r\n            else {\r\n                for (var x = 0; x < f.length - 1; x += 2) {\r\n                    var y = new Brush();\r\n                    y._fill = f[x];\r\n                    e.add(y);\r\n                }\r\n            }\r\n        }\r\n        container_.endCSSQuery();\r\n        return {\r\n            p4: d,\r\n            p5: e\r\n        };\r\n    };\r\n    BrushUtil.j = function (a, b, c, container_, d) {\r\n        var e = null;\r\n        container_.startCSSQuery();\r\n        var f = container_.getCssDefaultPropertyValue(a, \"background-image\");\r\n        if (f != null) {\r\n            e = CssGradientUtil.brushFromGradientString(f);\r\n        }\r\n        if (e == null) {\r\n            e = new Brush();\r\n            var g = container_.getCssDefaultPropertyValue(b, c);\r\n            e._fill = g != null ? g : d;\r\n        }\r\n        container_.endCSSQuery();\r\n        return e;\r\n    };\r\n    BrushUtil.$t = markType(BrushUtil, 'BrushUtil');\r\n    return BrushUtil;\r\n}(Base));\r\nexport { BrushUtil };\r\n//# sourceMappingURL=BrushUtil.js.map\r\n"]},"metadata":{},"sourceType":"module"}